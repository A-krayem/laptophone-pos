<?php
/*
 * @ https://EasyToYou.eu - IonCube v11 Decoder Online
 * @ PHP 5.6
 * @ Decoder version: 1.0.4
 * @ Release: 02/06/2020
 *
 * @ ZendGuard Decoder PHP 5.6
 */

// Decoded file for php version 53.
echo "<!DOCTYPE html>\n<!--\nTo change this license header, choose License Headers in Project Properties.\nTo change this template file, choose Tools | Templates\nand open the template in the editor.\n-->\n<html>\n    <head>\n        <title>";
echo $_SESSION["page_title"];
echo " Shrinkage</title>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <link rel=\"icon\" type=\"image/png\" href=\"resources/favicon.png\">\n\n        <script src=\"libraries/jquery-3.1.1.min.js\" type=\"text/javascript\"></script>\n\n        <script src=\"libraries/bootstrap-3.3.7-dist/js/bootstrap.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-3.3.7-dist/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/jquery.dataTables.min.js\" type=\"text/javascript\"></script>\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/dataTables.bootstrap.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/css/dataTables.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/extensions/Select/js/dataTables.select.min.js\" type=\"text/javascript\"></script>\n\n        \n        <link href=\"libraries/bootstrap-plugins/export/buttons.dataTables.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        <script src=\"libraries/bootstrap-plugins/export/dataTables.buttons.min.js\" type=\"text/javascript\"></script>\n        <script src=\"libraries/bootstrap-plugins/export/jszip.min.js\" type=\"text/javascript\"></script>\n        <script src=\"libraries/bootstrap-plugins/export/vfs_fonts.js\" type=\"text/javascript\"></script>\n        <script src=\"libraries/bootstrap-plugins/export/buttons.html5.min.js\" type=\"text/javascript\"></script>\n        \n        \n        \n        <script src=\"libraries/bootstrap-plugins/Buttons-1.2.4/js/buttons.bootstrap.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-plugins/Buttons-1.2.4/css/buttons.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        \n        <link href=\"libraries/bootstrap-plugins/datepicker-master/dist/css/bootstrap-datepicker.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        <script src=\"libraries/bootstrap-plugins/datepicker-master/dist/js/bootstrap-datepicker.min.js\" type=\"text/javascript\"></script>\n        \n        <script src=\"application/mvc/views/custom_libraries/javascripts/global_functions.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\n        <script src=\"application/mvc/views/custom_libraries/javascripts/global.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\n\n        <script src=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/js/bootstrap-select.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/css/bootstrap-select.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        <link href=\"application/mvc/views/custom_libraries/css/global.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\n        \n        <script src=\"libraries/jquery.mask.min.js\" type=\"text/javascript\"></script>\n        \n        <script src=\"libraries/bootstrap-plugins/libs/bootstrap-confirmation.min.js\" type=\"text/javascript\"></script>\n        \n        \n         <script src=\"application/mvc/views/custom_libraries/javascripts/jquery-confirm.min.js\"\n        type=\"text/javascript\"></script>\n    <link href=\"application/mvc/views/custom_libraries/css/jquery-confirm.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    \n    \n        <script src=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        <script src=\"libraries/numeric.js\" type=\"text/javascript\"></script>\n        \n        <link href=\"application/mvc/views/custom_libraries/svgs/font/style.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\n                \n        <script src=\"libraries/bootstrap-plugins/bootstrap3-typeahead/bootstrap3-typeahead.min.js\" type=\"text/javascript\"></script>\n        <script src=\"application/mvc/views/custom_libraries/javascripts/shrinkage.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\n        \n        <script src=\"libraries/excelToJson/xlsx.core.min.js\"></script>  \n        <script src=\"libraries/excelToJson/xls.core.min.js\"></script>\n                <script src=\"libraries/cleave.js-master/dist/cleave.min.js\" type=\"text/javascript\"></script>\n        <style type=\"text/css\">\n            \n            .container,.panel {\n                height:100%;\n                width: 100%;\n                padding: 0px !important;\n                margin: 0px !important;\n            }\n            \n            \n            \n            .table>tfoot>tr>th{\n                font-size: 12px !important;\n                background-color: #F3F3F3;\n                padding: 2px;\n                border: none !important;\n            }\n            \n            .dataTables_filter { display: none; }\n            \n            .input-sm{\n                height: 21px !important;\n            }\n            \n            .selected{\n                background-color: #337ab7 !important;\n                color: #ffffff !important;\n            }\n            \n            .selected_highlight{\n                 background-color: #337ab7 !important;\n                color: #ffffff !important;\n            }\n            \n            .search_filter{\n                width: 100% !important;\n                color: #000;\n            }\n            \n            \n            ::-webkit-input-placeholder { /* Chrome/Opera/Safari */\n                color: #337ab7;\n                opacity: 0.9;\n            }\n            ::-moz-placeholder { /* Firefox 19+ */\n                color: #337ab7;\n                opacity: 0.9;\n            }\n            :-ms-input-placeholder { /* IE 10+ */\n                color: #337ab7;\n                opacity: 0.9;\n            }\n            :-moz-placeholder { /* Firefox 18- */\n                color: #337ab7;\n                opacity: 0.9;\n            }\n            \n            /* enable absolute positioning */\n            .inner-addon { \n                position: relative; \n            }\n\n            /* style icon */\n            .inner-addon .glyphicon {\n              position: absolute;\n              padding: 6px;\n              pointer-events: none;\n            }\n\n            /* align icon */\n            .left-addon .glyphicon  { left:  0px;}\n            .right-addon .glyphicon { right: 0px;}\n\n            \n            .phone-input{\n                    margin-bottom:8px;\n            }\n            \n            .confirmation {\n                width: 160px;\n            }\n            \n            .list-group-item{\n                border: none !important;\n            }\n            \n            div.toolbar h3{\n                margin-top: 0px !important;\n            }\n            \n            .dataTable>tfoot>tr>th{\n                /* width: 50px !important; */\n            }\n            \n            .item_icon{\n                font-size: 18px;\n            }\n            .addon_item_icon input{\n                padding-left: 30px !important;\n            }\n            \n            #receive_stockModal .modal-dialog{\n                width: 99% !important;\n                max-height: 400px !important;\n            }\n            \n            \n            #po_modal .modal-body{\n                padding-top: 5px !important;\n                padding-bottom: 5px !important;\n            }\n            \n\n            #receive_stockModal button{\n                \n            }\n            \n            #stock_invoices button{\n                width: 100% !important;\n            }\n            \n            .stock_entry_header{\n                overflow-y: scroll;\n                margin-top: 5px;\n            }\n            \n            .stock_entry_header div{\n                padding-left: 3px !important; \n                padding-right: 3px !important;\n                background-color: #337ab7;\n                color: #ffffff;\n                border-right: 1px solid #fff;\n                font-size: 18px;\n            }\n            \n            .stock_entry div{\n                padding-left: 1px !important; \n                padding-right: 1px !important;\n                font-size: 15px;\n            }\n            \n            .stock_entry:hover{\n                background-color: #ccc;\n            }\n            \n            .stock_entry input{\n                height: 23px;\n                font-size: 15px;\n                width: 100%;\n                text-align: left;\n                margin-top: 1px !important;\n                margin-bottom: 1px !important;\n            }\n            \n            select{\n                height: 23px;\n                font-size: 15px;\n                width: 100%;\n                margin-top: 1px !important;\n                margin-bottom: 1px !important;\n            }\n            \n            .modal-body .row{\n                padding: 1px !important;\n            }\n            \n            .modal-body{\n                padding: 25px !important;\n                padding-top: 5px !important;\n            }\n            \n            #items_body{\n                max-height: 220px !important;\n                overflow-y: scroll;\n            }\n            \n            #exTab1 .tab-content {\n                background-color: transparent;\n                padding : 15px 15px;\n                border-bottom: 1px solid #CCC;\n                border-left: 1px solid #CCC;\n                border-right: 1px solid #CCC;\n                border-top: 1px solid #CCC;\n            }\n\n            #exTab1 .nav-pills > li > a {\n                border-radius: 4px 4px 0 0;\n                border: 1px solid #CCC;\n                border-bottom: 0px solid #CCC;\n                padding-top: 5px;\n                padding-bottom: 5px;\n            }\n            \n            /* add padding  */\n            .left-addon input  { padding-left:  5px; }\n            .right-addon input { padding-right: 30px; }\n            \n            .trash_icon{\n                font-size: 18px;\n                cursor: pointer;\n            }\n            \n            .form-group{\n                margin-bottom: 5px !important;\n            }\n            \n            .btn {\n                font-size: 13px !important;\n            }\n            \n            ul.typeahead.dropdown-menu {\n                max-height: 300px;\n                overflow: auto;\n            }\n            \n            .btn-xxs{\n                padding: 0px !important;\n                margin: 0px !important;\n                font-size: 12px !important;\n            }\n\n        </style>\n\n        <script type=\"text/javascript\">\n            var all_items = [];\n\n            var all_warehouses = [];\n            var all_stores = [];\n            var all_suppliers = [];\n            var all_currencies = [];\n            var payment_status = [];\n            var payment_methods = [];\n            \n            var categories_parents = [];\n            var categories = [];\n            \n            var current_category_id = 0;\n            var current_subcategory_id = 0;\n            \n            var default_currency_symbol = null;\n            var vatValue = null;\n            \n            var suppliers = [];\n            var current_supplier_id = null;\n            \n            function init(){\n                \$(\".sk-circle\").center();\n                \$(\".sk-circle-layer\").show();\n                \$.getJSON(\"?r=items&f=get_needed_data\", function (data) {\n                    default_currency_symbol = data.default_currency_symbol;\n                    vatValue = data.vat;\n                    \n                    all_suppliers = [];\n                    \$.each(data.suppliers, function (key, val) {\n                        if(current_supplier_id==null){\n                            current_supplier_id = 0;\n                        }\n                        all_suppliers.push({id:val.id,name:val.name});\n                    });\n                    \n                    \$.each(data.parents_categories, function (key, val) {\n                        categories_parents.push({id:val.id,name:val.name});\n                    });\n                    \$.each(data.categories, function (key, val) {\n                        categories.push({id:val.id,name:val.description,parent:val.parent});\n                    });\n                    \n                    all_items = [];\n                    \$.each(data.all_items, function (key, val) {\n                        all_items.push({'id':val.id,'description':val.description,'barcode':val.barcode,'unit_cost':val.buying_cost,'vat':val.vat});\n                    });\n                    \n                    all_stores = [];\n                    \$.each(data.stores, function (key, val) {\n                        all_stores.push({id:val.id,name:val.name});\n                    }); \n                }).done(function () {\n                     prepare_table();\n                });\n            }\n            \n            \n        function prepare_table(){\n                \$('#shrinkage_table').show();\n                \n                var search_fields = [0,1,2,3,4,5,6,7,8,9];\n                var index = 0;\n                \$('#shrinkage_table tfoot th').each( function () {\n                    \n                    if(jQuery.inArray(index, search_fields) !== -1){\n                        var title = \$(this).text();\n                        \$(this).html( '<div class=\"inner-addon left-addon\"><input id=\"idf_'+index+'\" style=\"width: 100% !important;\"  class=\"form-control input-sm\" type=\"text\" placeholder=\"'+title+'\" /></div>' );\n                        index++;\n                    }\n                });\n                \n                shrinkage_table = \$('#shrinkage_table').dataTable({\n                    ajax: \"?r=shrinkage&f=getAllShrinkages\",\n                    responsive: true,\n                    orderCellsTop: true,\n                    bLengthChange: true,\n                    iDisplayLength: 50,\n                    aoColumnDefs: [\n                        { \"targets\": [0], \"searchable\": true, \"orderable\": true, \"visible\": true },\n                        { \"targets\": [1], \"searchable\": true, \"orderable\": true, \"visible\": true },\n                        { \"targets\": [2], \"searchable\": true, \"orderable\": true, \"visible\": false },\n                        { \"targets\": [3], \"searchable\": true, \"orderable\": true, \"visible\": true },\n                        { \"targets\": [4], \"searchable\": true, \"orderable\": true, \"visible\": true },\n                        { \"targets\": [5], \"searchable\": true, \"orderable\": true, \"visible\": true },\n                        { \"targets\": [6], \"searchable\": true, \"orderable\": true, \"visible\": true },\n                        { \"targets\": [7], \"searchable\": true, \"orderable\": false, \"visible\": true },\n                        { \"targets\": [8], \"searchable\": true, \"orderable\": false, \"visible\": true },\n                        { \"targets\": [9], \"searchable\": true, \"orderable\": false, \"visible\": true },\n                        { \"targets\": [10], \"searchable\": true, \"orderable\": false, \"visible\": true },\n                        { \"targets\": [11], \"searchable\": true, \"orderable\": false, \"visible\": true },\n                        { \"targets\": [12], \"searchable\": true, \"orderable\": false, \"visible\": true }\n                    ],\n                    scrollY: '45vh',\n                    scrollCollapse: true,\n                    paging: true,\n                    order: [[ 0, \"asc\" ]],\n                    dom: '<\"toolbar\">frtip',\n                    initComplete: function( settings ) {\n                        var table = \$('#shrinkage_table').DataTable();\n                        table.row(':eq(0)', { page: 'current' }).select();\n                        \n                        var stores_option = \"\";\n                         for(var i=0;i<all_stores.length;i++){\n                             stores_option+='<option value='+all_stores[i].id+' title=\"'+all_stores[i].name+'\">'+all_stores[i].name+'</option>';\n                         }\n                 \n                        \$(\"div.toolbar\").html('<h3><i class=\"glyphicon glyphicon glyphicon-equalizer\"></i>&nbsp;Shrinkage</h3>\\n\\\n                        <div class=\"row\" style=\"margin-top:5px\">\\n\\\n                            <div class=\"col-lg-8 col-md-8 col-sm-8\">\\n\\\n                                <div id=\"tab_toolbar\" class=\"btn-group tab_toolbar\" role=\"group\" aria-label=\"\">\\n\\\n                                    <button onclick=\"add_shrinkage(0,[])\" type=\"button\" class=\"btn btn-primary \"><i class=\"glyphicon glyphicon-plus\"></i>&nbsp;Add New</button>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                        </div>\\n\\\n                        ');\n    \n                        \$('.selectpicker').selectpicker();\n    \n                        if(table.rows().count()==0)\n                            \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\n                        \n                       /* \$('[data-toggle=confirmation]').confirmation({\n                            rootSelector: '[data-toggle=confirmation]',\n                            placement: 'right',\n                            onConfirm: function() {\n                                var dt = \$('#shrinkage_table').DataTable();\n                                var sdata = dt.row('.selected', 0).data();\n                                \n                                if(\$(\".tab_toolbar button.blueB\").hasClass(\"disabled\")==false){\n                                    \$(\".sk-circle-layer\").show();\n                                    \$.getJSON(\"?r=shrinkage&f=delete_shrinkage&p0=\"+parseInt(sdata[0].split('-')[1]) , function (data) {\n                                        if(!data.status){\n                                            \$(\".sk-circle-layer\").hide();\n                                            swal(\"Unable to delete!\", \"Please contact system administrator\", \"warning\");\n                                        }else{\n                                            dt.row('.selected').remove().draw( false );\n                                            \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\n                                            \$(\".sk-circle-layer\").hide();\n                                            swal(\"\", \"Shrinkage has been deleted.\", \"success\");\n                                        }\n\n                                    }).done(function () {\n                                        \n                                    });\n                                }\n                            },\n                            onCancel: function() {\n                                \n                            },\n                            // other options\n                        });*/\n                        \n                        \$(\".sk-circle-layer\").hide();\n\n                        \n                    },\n                    fnRowCallback: function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {\n                        \$(nRow).addClass(aData[0]);\n                    },\n                    fnDrawCallback: updateRows,\n                });\n                \n                \$('#shrinkage_table').on( 'page.dt', function () {\n                    \$('.selected').removeClass(\"selected\");\n                    \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\n                });\n                \n              \n                \$('#shrinkage_table').DataTable().columns().every( function () {\n                    var that = this;\n                    \$( 'input', this.footer() ).on( 'keyup change', function () {\n                        \$('.selected').removeClass(\"selected\");\n                        if(\$(\".tab_toolbar button.blueB\").hasClass(\"disabled\")==false){\n                            \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\n                        }\n                        if ( that.search() !== this.value ) {\n                            that.search( this.value ).draw();\n                        }\n                    } );\n                } );\n            \n                function select_row(object){\n                    \$('.selected').removeClass(\"selected\");\n                    var dt = \$('#shrinkage_table').DataTable();\n                    var index = dt.row(object).index();\n                    dt.row(index).select(index);\n                }\n                \n                function double_click_row(object,e, dt, type, indexes){\n                    \$('.selected').removeClass(\"selected\");\n                    \$(object).addClass('selected');\n                    var dt = \$('#shrinkage_table').DataTable();\n                    var id = dt.row(object).data()[0];\n                    shrinking(parseInt(id.split('-')[1]));\n                }\n                \n                \$('#shrinkage_table').DataTable().on('dblclick',\"tr\", function ( e, dt, type, indexes ) {\n                    double_click_row(this,e, dt, type, indexes);\n                });\n                \n                \$(\"#shrinkage_table\").on(\"mousedown\", \"tr\", function(event) {\n                    \$('.selected').removeClass(\"selected\");\n                    var dt = \$('#shrinkage_table').DataTable();\n                    var index = dt.row(this).index();\n                    dt.row(index).select(index);\n                });\n                \n                \$('#shrinkage_table').DataTable().on('select', function ( e, dt, type, indexes ) {\n                    if (type === 'row') {\n                        \$('#contacts').popover('hide');\n                        \$(\".tab_toolbar button.blueB\").removeClass(\"disabled\");\n                    }\n                } );\n                \n                \$('#shrinkage_table').DataTable().on('deselect', function ( e, dt, type, indexes ) {\n                    if (type === 'row') {\n                        \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\n                    }\n                });\n            }\n            \n            function delete_sh(id){\n            \n                \$.confirm({\n                    title: 'Delete Shrinkage!',\n                    content: 'Are you sure?',\n                    animation: 'zoom',\n                    closeAnimation: 'zoom',\n                    animateFromElement:false,\n                    buttons: {\n                        DELETE: {\n                            btnClass: 'btn-danger',\n                            action: function(){\n                                \$(\".sk-circle-layer\").show();\n                                \$.getJSON(\"?r=shrinkage&f=delete_shrinkage&p0=\"+parseInt(id) , function (data) {\n                                    if(!data.status){\n                                        \$.alert({\n                                            title: 'Alert!',\n                                            content: 'Unable to deleted',\n                                        });\n                                    }else{\n                                        var table = \$('#shrinkage_table').DataTable();\n                                        table.ajax.url(\"?r=shrinkage&f=getAllShrinkages\").load(function () {\n                                            \$(\".sk-circle-layer\").hide();\n                                        }, false);\n                                    }\n                                }).done(function () {\n\n                                });\n                            }\n                        },\n                        CANCEL: {\n                            btnClass: 'btn-default any-other-class', // multiple classes.\n                            action: function(){\n\n                            }\n                        },\n                    }\n                });\n            \n                \n                \n            }\n            \n            \$(document).ready(function () {\n                init();\n            });\n            \n            function updateRows(){\n                var table = \$('#shrinkage_table').DataTable();\n                    var p = table.rows({ page: 'current' }).nodes();\n                    for (var k = 0; k < p.length; k++){\n                        var index = table.row(p[k]).index();\n                        table.cell(index, 10).data('<button onclick=\"shrinking('+parseInt(table.cell(index, 0).data().split(\"-\")[1])+')\" type=\"button\" class=\"btn btn-xs btn-info\" style=\"width:100%\">Compare</button>');\n                        table.cell(index, 11).data('<button onclick=\"shrinking_failed('+parseInt(table.cell(index, 0).data().split(\"-\")[1])+')\" type=\"button\" class=\"btn btn-xs btn-warning\" style=\"width:100%\">Items Failed</button>');\n                        \n                        table.cell(index, 12).data('&nbsp;<i onclick=\"edit_shrinkage_new('+parseInt(table.cell(index, 0).data().split(\"-\")[1])+')\" title=\"Edit\" class=\"glyphicon glyphicon-edit edit_icon\"></i>&nbsp;&nbsp;<i onclick=\"delete_sh('+parseInt(table.cell(index, 0).data().split(\"-\")[1])+')\" title=\"Delete\" class=\"glyphicon glyphicon-trash trash_icon red\"\"></i>');\n\n                    }\n            }\n            \n            \n            function shrinking_failed(id){\n                \$(\".sk-circle\").center();\n                \$(\".sk-circle-layer\").show();\n                var modal_name = \"modal_failed_modal__\";\n                    var modal_title = \"Items Failed\";\n                    var content =\n                    '<div class=\"modal small\" data-backdrop=\"static\" id=\"'+modal_name+'\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"payment_info__\" aria-hidden=\"true\">\\n\\\n                        <div class=\"modal-dialog\" role=\"document\">\\n\\\n                            <div class=\"modal-content\">\\n\\\n                                <div class=\"modal-header\" style=\"padding-top:5px;padding-bottom:5px;\">\\n\\\n                                    <h3 class=\"modal-title\">'+modal_title+'<i style=\"float:right;font-size:34px;\" class=\"glyphicon glyphicon-remove\" onclick=\"modal_close(\\''+modal_name+'\\')\"></i></h3>\\n\\\n                                </div>\\n\\\n                                <div class=\"modal-body\" style=\"padding-top:2px;\">\\n\\\n                                    <div class=\"row\">\\n\\\n                                        <div class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\\n\\\n                                            <table style=\"width:100%\" id=\"journal_table\" class=\"table table-striped table-bordered\" cellspacing=\"0\">\\n\\\n                                                <thead>\\n\\\n                                                    <tr>\\n\\\n                                                        <th style=\"width:75px;\">Shrinkage id</th>\\n\\\n                                                        <th style=\"width:200px;\">Barcode</th>\\n\\\n                                                        <th>Number</th>\\n\\\n                                                    </tr>\\n\\\n                                                </thead>\\n\\\n                                                <tbody></tbody>\\n\\\n                                            </table>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                        </div>\\n\\\n                    </div>';\n                    \$(\"#\"+modal_name).remove();\n                    \$(\"body\").append(content);\n\n                    \$('#'+modal_name).on('show.bs.modal', function (e) {\n\n                    });\n\n                    \$('#'+modal_name).on('shown.bs.modal', function (e) {\n                        var table_name = \"journal_table\";\n                        var new_table__var =null;\n\n                        var _cards_table__var = \$('#'+table_name).DataTable({\n                            ajax: {\n                                url: \"?r=shrinkage&f=failed_shrinkage&p0=\"+id+\"&p1=0&p2=0&p3=0&p4=0\",\n                                type: 'POST',\n                                error:function(xhr,status,error) {\n                                },\n                            },\n                            responsive: true,\n                            orderCellsTop: true,\n                            scrollX: true,\n                            scrollY: \"70vh\",\n                            iDisplayLength: 200,\n                            aoColumnDefs: [\n                                { \"targets\": [0], \"searchable\": false, \"orderable\": true,\"visible\": false },\n                                { \"targets\": [1], \"searchable\": false, \"orderable\": true,\"visible\": true },\n                                { \"targets\": [2], \"searchable\": true, \"orderable\": true, \"visible\": true },\n                            ],\n                            scrollCollapse: true,\n                            paging: false,\n                            bPaginate: false,\n                            bLengthChange: false,\n                            bFilter: true,\n                            bInfo: false,\n                            bAutoWidth: true,\n                            bSort:false,\n                            dom: '<\"toolbar_failed\">frtip',\n                            initComplete: function(settings, json) { \n\n                                \$(\"div.toolbar_failed\").html('\\n\\\n                                    <div class=\"row\" style=\"margin-top:5px\">\\n\\\n                                        <div class=\"col-lg-12 col-md-12 col-sm-12\">\\n\\\n                                            <div class=\"btn-group\" role=\"group\" aria-label=\"\" style=\"width:100%\">\\n\\\n                                                <div class=\"btn-group\" id=\"buttons\" style=\"float:right\"></div>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                    ');\n\n                                \n\n\n\n                                var buttons = new \$.fn.dataTable.Buttons(_cards_table__var, {\n                                    buttons: [\n                                      {\n                                            extend: 'excel',\n                                            text: 'Export excel',\n                                            className: 'exportExcel',\n                                            filename: 'Shirinkage items not found ',\n                                            customize: _customizeExcelOptions,\n                                            exportOptions: {\n                                                modifier: {\n                                                    page: 'all'\n                                                },\n                                                columns: [ 1,2 ]\n                                                //format: {\n                                                    //body: function ( data, row, column, node ) {\n                                                        // Strip \$ from salary column to make it numeric\n                                                        ///return column === 6 ? data.replace( /[L.L.,]/g, '' ) : data;\n                                                    //}\n                                                //}\n                                            }\n                                      }\n                                    ]\n\n                               }).container().appendTo(\$('#buttons'));\n\n                               function _customizeExcelOptions(xlsx) {\n                                   var sheet = xlsx.xl.worksheets['sheet1.xml'];\n                                    var clR = \$('row', sheet);\n                                    //var r1 = Addrow(clR.length+2, [{key:'A',value: \"Total Credit Notes\"},{key:'B',value: total}]);\n                                    sheet.childNodes[0].childNodes[1].innerHTML = sheet.childNodes[0].childNodes[1].innerHTML;\n\n                                    \$('row c[r^=\"A'+(clR.length+2)+'\"]', sheet).attr('s', '48');\n\n                                    function Addrow(index, data) {\n                                        var msg = '<row r=\"' + index + '\">'\n                                        for (var i = 0; i < data.length; i++) {\n                                            var key = data[i].key;\n                                            var value = data[i].value;\n                                            msg += '<c t=\"inlineStr\" r=\"' + key + index + '\">';\n                                            msg += '<is>';\n                                            msg += '<t>' + value + '</t>';\n                                            msg += '</is>';\n                                            msg += '</c>';\n                                        }\n                                        msg += '</row>';\n                                        return msg;\n                                    }\n                               }\n\n                                \$(\".sk-circle-layer\").hide();\n                            },\n                            fnRowCallback: function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {\n                                \$(nRow).addClass(aData[0]);\n                            },\n                            //fnDrawCallback: updateRowsManualInvoice,\n                        });\n\n                        \$('#'+table_name).DataTable().on('mousedown',\"tr\", function ( e, dt, type, indexes ) { \n                            \$('.selected').removeClass(\"selected\");\n                            \$(this).addClass('selected');\n                        });\n\n\n                        \$('#'+table_name).on('click', 'td', function () {\n                            if (\$(this).index() == 4 || \$(this).index() == 5) {\n                                //return false;\n                            }\n                        });\n                    });\n\n                    \$('#'+modal_name).on('hide.bs.modal', function (e) {\n                        \$(\"#\"+modal_name).remove();\n                    });\n\n                    \$('#'+modal_name).modal('show');\n            }\n            \n            \n            function edit_shrinkage(){\n                var dt = \$('#shrinkage_table').DataTable();\n                var sdata = dt.row('.selected', 0).data();\n                var result = [];\n                \$.getJSON(\"?r=shrinkage&f=get_shrinkage_by_id&p0=\" + parseInt(sdata[0].split('-')[1]), function (data) {\n                    result = data;\n                }).done(function () {\n                    add_shrinkage(parseInt(sdata[0].split('-')[1]),result);\n                });\n            }\n            \n            function edit_shrinkage_new(id){\n                var result = [];\n                \$.getJSON(\"?r=shrinkage&f=get_shrinkage_by_id&p0=\" + parseInt(id), function (data) {\n                    result = data;\n                }).done(function () {\n                    add_shrinkage(parseInt(id),result);\n                });\n            }\n \n            function update_subcategories(){\n                \$('#subcategories_list').empty();\n                \$('#subcategories_list').append('<option value=0 title=\"All Sub-Categories\">All Sub-Categories</option>');\n                for(var i=0;i<categories.length;i++){\n                    if(categories[i].parent==current_category_id || current_category_id==0){\n                       \$('#subcategories_list').append('<option value='+categories[i].id+' title=\"'+categories[i].name+'\">'+categories[i].name+'</option>');\n                    }\n                }\n                \$('#subcategories_list').selectpicker('refresh');\n            }\n            \n            \n            \n            \n        </script>\n    </head>\n    <body>\n        \n        ";
include "application/mvc/views/topMenu.php";
echo "        <div class=\"container\" >\n            <div class=\"panel panel-default\">\n                <div class=\"panel-body\" style=\"margin-top: 50px;\">\n                    <div class=\"row\">\n                        <div class=\"col-lg-12\" >           \n                            <table id=\"shrinkage_table\" class=\"table table-striped table-bordered \" cellspacing=\"0\">\n                                <thead>\n                                    <tr>\n                                        <th style=\"width: 70px;\">ID</th>\n                                        <th style=\"width: 100px;\">Shrinkage Date</th>\n                                        <th style=\"width: 100px;\">Store</th>\n                                        <th>Description</th>\n                                        <th style=\"width: 80px;\">Total Records</th>\n                                        <th style=\"width: 80px;\">Compared</th>\n                                        <th style=\"width: 90px;\">Not Equal</th>\n                                        <th style=\"width: 100px;\">Total Lost</th>\n                                        <th style=\"width: 100px;\">Excel Rows</th>\n                                        <th style=\"width: 100px;\">Scanner QTY</th>\n                                        <th style=\"width: 70px;\"></th>\n                                        <th style=\"width: 70px;\"></th>\n                                        <th style=\"width: 70px;\"></th>\n                                    </tr>\n                                </thead>\n                                <tfoot>\n                                    <tr>\n                                        <th>ID</th>\n                                        <th>Shrinkage Date</th>\n                                        <th>Store</th>\n                                        <th>Description</th>\n                                        <th>Total Records</th>\n                                        <th>Compared</th>\n                                        <th>Not Compared</th>\n                                        <th>Total Lost</th>\n                                        <th>Excel Rows</th>\n                                        <th>Scanner QTY</th>\n                                        <th></th>\n                                        <th></th>\n                                         <th></th>\n                                    </tr>\n                                </tfoot>\n                                <tbody></tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"sk-circle-layer\">\n            <div class=\"sk-circle\">\n                <div class=\"sk-circle1 sk-child\"></div>\n                <div class=\"sk-circle2 sk-child\"></div>\n                <div class=\"sk-circle3 sk-child\"></div>\n                <div class=\"sk-circle4 sk-child\"></div>\n                <div class=\"sk-circle5 sk-child\"></div>\n                <div class=\"sk-circle6 sk-child\"></div>\n                <div class=\"sk-circle7 sk-child\"></div>\n                <div class=\"sk-circle8 sk-child\"></div>\n                <div class=\"sk-circle9 sk-child\"></div>\n                <div class=\"sk-circle10 sk-child\"></div>\n                <div class=\"sk-circle11 sk-child\"></div>\n                <div class=\"sk-circle12 sk-child\"></div>\n            </div>\n        </div>\n    </body>\n</html>\n\n";

?>