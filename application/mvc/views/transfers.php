<?php
/*
 * @ https://EasyToYou.eu - IonCube v11 Decoder Online
 * @ PHP 5.6
 * @ Decoder version: 1.0.4
 * @ Release: 02/06/2020
 *
 * @ ZendGuard Decoder PHP 5.6
 */

// Decoded file for php version 53.
echo "<!DOCTYPE html>\r\n<!--\r\nTo change this license header, choose License Headers in Project Properties.\r\nTo change this template file, choose Tools | Templates\r\nand open the template in the editor.\r\n-->\r\n<html>\r\n    <head>\r\n        <title>";
echo $_SESSION["page_title"];
echo " Transfers</title>\r\n        <meta charset=\"UTF-8\">\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n        <link rel=\"icon\" type=\"image/png\" href=\"resources/favicon.png\">\r\n\r\n        <script src=\"libraries/jquery-3.1.1.min.js\" type=\"text/javascript\"></script>\r\n\r\n        <script src=\"libraries/bootstrap-3.3.7-dist/js/bootstrap.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-3.3.7-dist/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/jquery.dataTables.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/dataTables.bootstrap.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/css/dataTables.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n\r\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/extensions/Select/js/dataTables.select.min.js\" type=\"text/javascript\"></script>\r\n\r\n        \r\n        <link href=\"libraries/bootstrap-plugins/export/buttons.dataTables.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/bootstrap-plugins/export/dataTables.buttons.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/export/jszip.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/export/vfs_fonts.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/export/buttons.html5.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        \r\n        \r\n        <script src=\"libraries/bootstrap-plugins/Buttons-1.2.4/js/buttons.bootstrap.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/Buttons-1.2.4/css/buttons.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n        <link href=\"libraries/bootstrap-plugins/datepicker-master/dist/css/bootstrap-datepicker.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/bootstrap-plugins/datepicker-master/dist/js/bootstrap-datepicker.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/global_functions.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/global.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n\r\n        <script src=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/js/bootstrap-select.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/css/bootstrap-select.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <link href=\"application/mvc/views/custom_libraries/css/global.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n        <script src=\"libraries/jquery.mask.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/libs/bootstrap-confirmation.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/numeric.js\" type=\"text/javascript\"></script>\r\n        \r\n        \r\n                <!-- Include Date Range Picker -->\r\n        <script src=\"libraries/bootstrap-plugins/daterangepicker-master/moment.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/daterangepicker-master/daterangepicker.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/daterangepicker-master/daterangepicker.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n        \r\n        <link href=\"application/mvc/views/custom_libraries/svgs/font/style.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\r\n                \r\n        <script src=\"libraries/bootstrap-plugins/bootstrap3-typeahead/bootstrap3-typeahead.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/transfers.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n        \r\n                <script src=\"libraries/cleave.js-master/dist/cleave.min.js\" type=\"text/javascript\"></script>\r\n        <style type=\"text/css\">\r\n            \r\n            .container,.panel {\r\n                height:100%;\r\n                width: 100%;\r\n                padding: 0px !important;\r\n                margin: 0px !important;\r\n            }\r\n            \r\n            .pending{\r\n                color: #e38d13 !important;\r\n                font-weight: bold;\r\n            }\r\n            \r\n            .table>tfoot>tr>th{\r\n                font-size: 12px !important;\r\n                background-color: #F3F3F3;\r\n                padding: 2px;\r\n                border: none !important;\r\n            }\r\n            \r\n            .dataTables_filter { display: none; }\r\n            \r\n            .input-sm{\r\n                height: 21px !important;\r\n            }\r\n            \r\n            .selected{\r\n                background-color: #337ab7 !important;\r\n                color: #ffffff !important;\r\n            }\r\n            \r\n            .selected_highlight{\r\n                 background-color: #337ab7 !important;\r\n                color: #ffffff !important;\r\n            }\r\n            \r\n            .search_filter{\r\n                width: 100% !important;\r\n                color: #000;\r\n            }\r\n            \r\n            \r\n            ::-webkit-input-placeholder { /* Chrome/Opera/Safari */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            ::-moz-placeholder { /* Firefox 19+ */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            :-ms-input-placeholder { /* IE 10+ */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            :-moz-placeholder { /* Firefox 18- */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            \r\n            /* enable absolute positioning */\r\n            .inner-addon { \r\n                position: relative; \r\n            }\r\n\r\n            /* style icon */\r\n            .inner-addon .glyphicon {\r\n              position: absolute;\r\n              padding: 6px;\r\n              pointer-events: none;\r\n            }\r\n\r\n            /* align icon */\r\n            .left-addon .glyphicon  { left:  0px;}\r\n            .right-addon .glyphicon { right: 0px;}\r\n\r\n            \r\n            .phone-input{\r\n                    margin-bottom:8px;\r\n            }\r\n            \r\n            .confirmation {\r\n                width: 160px;\r\n            }\r\n            \r\n            .list-group-item{\r\n                border: none !important;\r\n            }\r\n            \r\n            div.toolbar h3{\r\n                margin-top: 0px !important;\r\n            }\r\n            \r\n            .dataTable>tfoot>tr>th{\r\n                /* width: 50px !important; */\r\n            }\r\n            \r\n            .item_icon{\r\n                font-size: 18px;\r\n            }\r\n            .addon_item_icon input{\r\n                padding-left: 30px !important;\r\n            }\r\n            \r\n            #receive_stockModal .modal-dialog{\r\n                width: 99% !important;\r\n                max-height: 400px !important;\r\n            }\r\n            \r\n            \r\n            #po_modal .modal-body{\r\n                padding-top: 5px !important;\r\n                padding-bottom: 5px !important;\r\n            }\r\n            \r\n\r\n            #receive_stockModal button{\r\n                \r\n            }\r\n            \r\n            #stock_invoices button{\r\n                width: 100% !important;\r\n            }\r\n            \r\n            .stock_entry_header{\r\n                overflow-y: scroll;\r\n                margin-top: 5px;\r\n            }\r\n            \r\n            .stock_entry_header div{\r\n                padding-left: 3px !important; \r\n                padding-right: 3px !important;\r\n                background-color: #337ab7;\r\n                color: #ffffff;\r\n                border-right: 1px solid #fff;\r\n                font-size: 18px;\r\n            }\r\n            \r\n            .stock_entry div{\r\n                padding-left: 1px !important; \r\n                padding-right: 1px !important;\r\n                font-size: 15px;\r\n            }\r\n            \r\n            .stock_entry:hover{\r\n                background-color: #ccc;\r\n            }\r\n            \r\n            .stock_entry input{\r\n                height: 23px;\r\n                font-size: 15px;\r\n                width: 100%;\r\n                text-align: left;\r\n                margin-top: 1px !important;\r\n                margin-bottom: 1px !important;\r\n            }\r\n            \r\n            select{\r\n                height: 23px;\r\n                font-size: 15px;\r\n                width: 100%;\r\n                margin-top: 1px !important;\r\n                margin-bottom: 1px !important;\r\n            }\r\n            \r\n            .modal-body .row{\r\n                padding: 1px !important;\r\n            }\r\n            \r\n            .modal-body{\r\n                padding: 25px !important;\r\n                padding-top: 5px !important;\r\n            }\r\n            \r\n            #items_body{\r\n                max-height: 220px !important;\r\n                overflow-y: scroll;\r\n            }\r\n            \r\n            #exTab1 .tab-content {\r\n                background-color: transparent;\r\n                padding : 15px 15px;\r\n                border-bottom: 1px solid #CCC;\r\n                border-left: 1px solid #CCC;\r\n                border-right: 1px solid #CCC;\r\n                border-top: 1px solid #CCC;\r\n            }\r\n\r\n            #exTab1 .nav-pills > li > a {\r\n                border-radius: 4px 4px 0 0;\r\n                border: 1px solid #CCC;\r\n                border-bottom: 0px solid #CCC;\r\n                padding-top: 5px;\r\n                padding-bottom: 5px;\r\n            }\r\n            \r\n            /* add padding  */\r\n            .left-addon input  { padding-left:  5px; }\r\n            .right-addon input { padding-right: 30px; }\r\n            \r\n            .trash_icon{\r\n                font-size: 18px;\r\n                cursor: pointer;\r\n            }\r\n            \r\n            .form-group{\r\n                margin-bottom: 5px !important;\r\n            }\r\n            \r\n            .btn {\r\n                font-size: 13px !important;\r\n            }\r\n            \r\n            ul.typeahead.dropdown-menu {\r\n                max-height: 300px;\r\n                overflow: auto;\r\n            }\r\n            \r\n            .btn-xxs{\r\n                padding: 0px !important;\r\n                margin: 0px !important;\r\n                font-size: 12px !important;\r\n            }\r\n            \r\n            .selected_highlight_transfer{\r\n                background-color: #CCC !important;\r\n            }\r\n            \r\n            #destination_table.table>tbody>tr>td, #transfers_details_table.table>tbody>tr>td{\r\n                padding: 3px !important;\r\n                font-size: 14px !important;\r\n            }\r\n            \r\n            .input-xxs{\r\n                padding: 0px !important;\r\n                margin: 0px !important;\r\n                font-size: 12px !important;\r\n                height: 22px;\r\n                width: 35px !important;\r\n                text-align: center;\r\n            }\r\n            \r\n            .btn-xss{\r\n                height: 20px;\r\n                width: 23px !important;\r\n                margin-left: 2px;\r\n                margin-right: 2px;\r\n                font-size: 16px !important;\r\n                padding-top: 0px !important;\r\n                line-height: 1.1;\r\n            }\r\n            \r\n            .dt-center{\r\n                text-align: center !important;\r\n            }\r\n            \r\n            .edit_mode{\r\n                color: #e38d13;\r\n                font-weight: bold;\r\n            }\r\n            \r\n            .delete_icon{\r\n                color: #d9534f;\r\n                font-size: 17px;\r\n                cursor: pointer;\r\n            }\r\n            \r\n            .toolbar_transfer button{\r\n                padding: 3px !important;\r\n                padding-left: 6px !important;\r\n            }\r\n            \r\n            .trns_logo{\r\n                font-size:18px; \r\n                cursor:pointer\r\n            }\r\n\r\n            \r\n            .trns_logo_dis{\r\n                font-size:18px; \r\n                color: #CCC !important;\r\n            }\r\n        </style>\r\n\r\n        <script type=\"text/javascript\">\r\n            var all_items = [];\r\n\r\n            var all_warehouses = [];\r\n            var all_stores = [];\r\n            var all_suppliers = [];\r\n            var all_currencies = [];\r\n            var payment_status = [];\r\n            var payment_methods = [];\r\n            \r\n            var categories_parents = [];\r\n            var categories = [];\r\n            \r\n            var clients_type = JSON.parse('";
echo json_encode($data["clients_types"], 2);
echo "');\r\n            \r\n            var current_category_id = 0;\r\n            var current_subcategory_id = 0;\r\n            \r\n            var default_currency_symbol = null;\r\n            var vatValue = null;\r\n            \r\n            var suppliers = [];\r\n            var current_supplier_id = null;\r\n            \r\n            var current_store_id = 0;\r\n            \r\n            var current_transfer_id = 0;\r\n            \r\n            \r\n             var print_barcode_in_browser = 0;\r\n            \r\n            function init(){\r\n                \$(\".sk-circle\").center();\r\n                \$(\".sk-circle-layer\").show();\r\n                \$.getJSON(\"?r=items&f=get_needed_data\", function (data) {\r\n                    default_currency_symbol = data.default_currency_symbol;\r\n                    print_barcode_in_browser = data.print_barcode_in_browser;\r\n                    vatValue = data.vat;\r\n                    \r\n                    all_suppliers = [];\r\n                    \$.each(data.suppliers, function (key, val) {\r\n                        if(current_supplier_id==null){\r\n                            current_supplier_id = 0;\r\n                        }\r\n                        all_suppliers.push({id:val.id,name:val.name});\r\n                    });\r\n                    \r\n                    \$.each(data.parents_categories, function (key, val) {\r\n                        categories_parents.push({id:val.id,name:val.name});\r\n                    });\r\n                    \$.each(data.categories, function (key, val) {\r\n                        categories.push({id:val.id,name:val.description,parent:val.parent});\r\n                    });\r\n                    \r\n                    all_items = [];\r\n                    \$.each(data.all_items, function (key, val) {\r\n                        all_items.push({'id':val.id,'description':val.description,'barcode':val.barcode,'unit_cost':val.buying_cost,'vat':val.vat});\r\n                    });\r\n                    \r\n                    all_stores_totally = [];\r\n                    \$.each(data.all_stores_totally, function (key, val) {\r\n                        all_stores_totally.push({id:val.id,name:val.name});\r\n                    });\r\n                    \r\n                    all_stores = [];\r\n                    \$.each(data.stores, function (key, val) {\r\n                        if(current_store_id==0)\r\n                               current_store_id = val.id;\r\n                        all_stores.push({id:val.id,name:val.name});\r\n                    });\r\n                    \r\n                    all_stores_secondary = [];\r\n                    \$.each(data.stores_secondary, function (key, val) {\r\n                        all_stores_secondary.push({id:val.id,name:val.name});\r\n                    });\r\n                    \r\n                    all_stores_primary = [];\r\n                    \$.each(data.all_stores_primary, function (key, val) {\r\n                        all_stores_primary.push({id:val.id,name:val.name});\r\n                    });\r\n                    \r\n                }).done(function () {\r\n                     prepare_table();\r\n                });\r\n            }\r\n            \r\n            \r\n        function prepare_table(){\r\n                \$('#transfers_table').show();\r\n                \r\n                var search_fields = [0,1,2,3,4,5,6,7,8];\r\n                var index = 0;\r\n                \$('#transfers_table tfoot th').each( function () {\r\n                    \r\n                    if(jQuery.inArray(index, search_fields) !== -1){\r\n                        var title = \$(this).text();\r\n                        \$(this).html( '<div class=\"inner-addon left-addon\"><input id=\"idf_'+index+'\" style=\"width: 100% !important;\"  class=\"form-control input-sm\" type=\"text\" placeholder=\"'+title+'\" /></div>' );\r\n                        index++;\r\n                    }\r\n                });\r\n                \r\n                transfers_table = \$('#transfers_table').dataTable({\r\n                    ajax: \"?r=transfer&f=getAllTransfers&p0=latest\",\r\n                    responsive: true,\r\n                    orderCellsTop: true,\r\n                    bLengthChange: true,\r\n                    iDisplayLength: 50,\r\n                    aoColumnDefs: [\r\n                        { \"targets\": [0], \"searchable\": true, \"orderable\": true, \"visible\": true },\r\n                        { \"targets\": [1], \"searchable\": true, \"orderable\": true, \"visible\": true },\r\n                        { \"targets\": [2], \"searchable\": true, \"orderable\": true, \"visible\": true },\r\n                        { \"targets\": [3], \"searchable\": true, \"orderable\": true, \"visible\": true },\r\n                        { \"targets\": [4], \"searchable\": true, \"orderable\": true, \"visible\": true },\r\n                        { \"targets\": [5], \"searchable\": true, \"orderable\": true, \"visible\": true },\r\n                        { \"targets\": [6], \"searchable\": true, \"orderable\": true, \"visible\": true },\r\n                        { \"targets\": [7], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [8], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [9], \"searchable\": false, \"orderable\": false, \"visible\": false },\r\n                        { \"targets\": [10], \"searchable\": false, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [10], \"searchable\": false, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [11], \"searchable\": false, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [12], \"searchable\": false, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [13], \"searchable\": false, \"orderable\": false, \"visible\": true }\r\n                    ],\r\n                    scrollY: '45vh',\r\n                    scrollCollapse: true,\r\n                    paging: true,\r\n                    order: [[ 0, \"asc\" ]],\r\n                    dom: '<\"toolbar\">frtip',\r\n                    initComplete: function( settings ) {\r\n                        var table = \$('#transfers_table').DataTable();\r\n                        table.row(':eq(0)', { page: 'current' }).select();\r\n                        \r\n                        var stores_option = \"\";\r\n                         for(var i=0;i<all_stores.length;i++){\r\n                             stores_option+='<option value='+all_stores[i].id+' title=\"'+all_stores[i].name+'\">'+all_stores[i].name+'</option>';\r\n                         }\r\n                 \r\n                        \$(\"div.toolbar\").html('<h3><i class=\"glyphicon glyphicon-transfer\"></i>&nbsp;Transfers</h3>\\n\\\r\n                        <div class=\"row\" style=\"margin-top:5px\">\\n\\\r\n                            <div class=\"col-lg-8 col-md-8 col-sm-8\">\\n\\\r\n                                <div id=\"tab_toolbar\" class=\"btn-group tab_toolbar\" role=\"group\" aria-label=\"\">\\n\\\r\n                                    <button onclick=\"add_transfer(0,[])\" type=\"button\" class=\"btn btn-primary \"><i class=\"glyphicon glyphicon-plus\"></i>&nbsp;Add New</button>\\n\\\r\n                                    <button onclick=\"edit_transfer()\" type=\"button\" class=\"btn btn-primary blueB\"><i class=\"glyphicon glyphicon-edit\"></i>&nbsp;Edit</button>\\n\\\r\n                                    <button class=\"btn btn-danger blueB\" data-toggle=\"confirmation\" data-singleton=\"true\" data-title=\"Are you sure?\"><i class=\"glyphicon glyphicon-trash\"></i>&nbsp;Delete</button>\\n\\\r\n                                </div>\\n\\\r\n                                <div id=\"tab_toolbar_\" class=\"btn-group tab_toolbar\" role=\"group\" aria-label=\"\">\\n\\\r\n                                    <button class=\"btn btn-primary blueB\" data-toggle=\"confirmation\" id=\"duplicate_confirm\" data-singleton=\"true\" data-title=\"Are you sure?\"><i class=\"glyphicon glyphicon-trash\"></i>&nbsp;Duplicate</button>\\n\\\r\n                                </div>\\n\\\r\n                            </div>\\n\\\r\n                            <div class=\"col-lg-4 col-md-4 col-sm-4\">\\n\\\r\n                                <input id=\"date_filter\" class=\"form-control datepicker\" type=\"text\" placeholder=\"Select date\" style=\"cursor:pointer;width:200px;float:right;text-align:center\" />\\n\\\r\n                            </div>\\n\\\r\n                        </div>\\n\\\r\n                        ');\r\n    \r\n    \r\n                        \r\n                        var start = moment().subtract(0, 'days');\r\n                        var end = moment();\r\n\r\n                        \$('#date_filter').daterangepicker({\r\n                            //dateLimit:{month:12},\r\n                            startDate: start,\r\n                            endDate: end,\r\n                            locale: {\r\n                                format: 'YYYY-MM-DD',\r\n                            },\r\n                        });\r\n                        \r\n                        \$( \"#date_filter\" ).change(function() {\r\n                           refresh_transfers_table();\r\n                            \r\n                        });\r\n    \r\n                        \$('.selectpicker').selectpicker();\r\n    \r\n                        if(table.rows().count()==0)\r\n                            \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\r\n                        \r\n                        \r\n                        \$('#duplicate_confirm').confirmation({\r\n                            rootSelector: '[data-toggle=confirmation]',\r\n                            placement: 'right',\r\n                            onConfirm: function() {\r\n                                var dt = \$('#transfers_table').DataTable();\r\n                                var sdata = dt.row('.selected', 0).data();\r\n                                \r\n                                if(parseInt(sdata[0])>0){\r\n                                    duplicate_transfer(parseInt(sdata[0]));\r\n                                }\r\n                            },\r\n                            onCancel: function() {\r\n                                \r\n                            },\r\n                            // other options\r\n                        });\r\n                        \r\n                        \$('[data-toggle=confirmation]').confirmation({\r\n                            rootSelector: '[data-toggle=confirmation]',\r\n                            placement: 'right',\r\n                            onConfirm: function() {\r\n                                var dt = \$('#transfers_table').DataTable();\r\n                                var sdata = dt.row('.selected', 0).data();\r\n                                \r\n                                if(\$(\".tab_toolbar button.blueB\").hasClass(\"disabled\")==false){\r\n                                    \$(\".sk-circle-layer\").show();\r\n                                    \$.getJSON(\"?r=transfer&f=delete_transfer&p0=\"+parseInt(sdata[0]) , function (data) {\r\n                                        if(!data.status){\r\n                                            \$(\".sk-circle-layer\").hide();\r\n                                            swal(\"Unable to delete!\", \"Transfer already confirmed\", \"warning\");\r\n                                        }else{\r\n                                            dt.row('.selected').remove().draw( false );\r\n                                            \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\r\n                                            \$(\".sk-circle-layer\").hide();\r\n                                            swal(\"\", \"Transfer has been deleted.\", \"success\");\r\n                                        }\r\n\r\n                                    }).done(function () {\r\n                                        \r\n                                    });\r\n                                }\r\n                            },\r\n                            onCancel: function() {\r\n                                \r\n                            },\r\n                            // other options\r\n                        });\r\n                        \r\n                        \$(\".sk-circle-layer\").hide();\r\n\r\n                  \r\n                    },\r\n                    fnRowCallback: function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {\r\n                        \$(nRow).addClass(aData[0]);\r\n                    },\r\n                    fnDrawCallback: updateRows,\r\n                });\r\n                \r\n                \$('#transfers_table').on( 'page.dt', function () {\r\n                    \$('.selected').removeClass(\"selected\");\r\n                    \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\r\n                });\r\n                \r\n              \r\n                \$('#transfers_table').DataTable().columns().every( function () {\r\n                    var that = this;\r\n                    \$( 'input', this.footer() ).on( 'keyup change', function () {\r\n                        \$('.selected').removeClass(\"selected\");\r\n                        if(\$(\".tab_toolbar button.blueB\").hasClass(\"disabled\")==false){\r\n                            \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\r\n                        }\r\n                        if ( that.search() !== this.value ) {\r\n                            that.search( this.value ).draw();\r\n                        }\r\n                    } );\r\n                } );\r\n            \r\n                function select_row(object){\r\n                    \$('.selected').removeClass(\"selected\");\r\n                    var dt = \$('#transfers_table').DataTable();\r\n                    var index = dt.row(object).index();\r\n                    dt.row(index).select(index);\r\n                }\r\n                \r\n                function double_click_row(object,e, dt, type, indexes){\r\n                    \$('.selected').removeClass(\"selected\");\r\n                    \$(object).addClass('selected');\r\n                    var dt = \$('#transfers_table').DataTable();\r\n                    var id = dt.row(object).data()[0];\r\n                    //shrinking(parseInt(id.split('-')[1]));\r\n                }\r\n                \r\n                \$('#transfers_table').DataTable().on('dblclick',\"tr\", function ( e, dt, type, indexes ) {\r\n                    double_click_row(this,e, dt, type, indexes);\r\n                });\r\n                \r\n                \$(\"#transfers_table\").on(\"mousedown\", \"tr\", function(event) {\r\n                    \$('.selected').removeClass(\"selected\");\r\n                    var dt = \$('#transfers_table').DataTable();\r\n                    var index = dt.row(this).index();\r\n                    dt.row(index).select(index);\r\n                });\r\n                \r\n                \$('#transfers_table').DataTable().on('select', function ( e, dt, type, indexes ) {\r\n                    if (type === 'row') {\r\n                        \$('#contacts').popover('hide');\r\n                        \$(\".tab_toolbar button.blueB\").removeClass(\"disabled\");\r\n                    }\r\n                } );\r\n                \r\n                \$('#transfers_table').DataTable().on('deselect', function ( e, dt, type, indexes ) {\r\n                    if (type === 'row') {\r\n                        \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\r\n                    }\r\n                });\r\n            }\r\n            \r\n            function print_transfer(transfer_id,g){\r\n                window.open(\"?r=transfer&f=transfer_details&p0=\"+transfer_id+\"&p1=\"+g, '_blank');\r\n            }\r\n                \r\n            \r\n            \$(document).ready(function () {\r\n                init();\r\n            });\r\n            \r\n            \r\n            \r\n            function updateRows(){\r\n                var table = \$('#transfers_table').DataTable();\r\n                var p = table.rows({ page: 'current' }).nodes();\r\n                for (var k = 0; k < p.length; k++){\r\n                    var index = table.row(p[k]).index();\r\n                    table.cell(index, 10).data('<button onclick=\"transfer_action('+parseInt(table.cell(index, 0).data())+')\" type=\"button\" class=\"btn btn-xs btn-info\" style=\"width:100%\">Show/Edit</button>');\r\n\r\n                    if(table.cell(index, 9).data()==0){\r\n                        table.cell(index, 11).data('<button onclick=\"submit_transfer('+parseInt(table.cell(index, 0).data())+')\" type=\"button\" class=\"btn btn-xs btn-warning\" style=\"width:100%\">Confirm</button>');\r\n                    }else{\r\n                        table.cell(index, 11).data('<button type=\"button\" class=\"btn btn-xs  disabled\" style=\"width:100%\">Confirm</button>');\r\n                    }\r\n                    table.cell(index, 12).data('<button onclick=\"print_barcodes_transfer('+parseInt(table.cell(index, 0).data())+')\" type=\"button\" class=\"btn btn-xs btn-info\" style=\"width:100%\">Barcodes</button>');\r\n                    table.cell(index, 13).data('<button onclick=\"print_transfer('+parseInt(table.cell(index, 0).data())+',0)\" type=\"button\" class=\"btn btn-xs btn-info\" style=\"width:50px\">Print A4</button>&nbsp;<button style=\"width:60px\" onclick=\"print_transfer('+parseInt(table.cell(index, 0).data())+',1)\" type=\"button\" class=\"btn btn-xs btn-info\" style=\"width:100%\">Print A4 G</button>');\r\n                }\r\n            }\r\n            \r\n            \r\n            function edit_transfer(){\r\n                var dt = \$('#transfers_table').DataTable();\r\n                var sdata = dt.row('.selected', 0).data();\r\n                var result = [];\r\n                \$.getJSON(\"?r=transfer&f=get_transfer_by_id&p0=\" + parseInt(sdata[0]), function (data) {\r\n                    result = data;\r\n                }).done(function () {\r\n                    add_transfer(parseInt(sdata[0]),result);\r\n                });\r\n            }\r\n            \r\n            function refresh_transfers_table(){\r\n                var table = \$('#transfers_table').DataTable();\r\n                \$(\".sk-circle-layer\").show();\r\n\r\n                var old_index = table.row('.selected', 0).index();\r\n                table.ajax.url(\"?r=transfer&f=getAllTransfers&p0=\"+\$(\"#date_filter\").val()).load(function () {\r\n                    table.row(old_index).select(old_index);\r\n\r\n                    \$(\".sk-circle-layer\").hide();\r\n                },false);\r\n            }\r\n            \r\n            \r\n            \r\n            function update_subcategories(){\r\n                \$('#subcategories_list').empty();\r\n                \$('#subcategories_list').append('<option value=0 title=\"All Sub-Categories\">All Sub-Categories</option>');\r\n                for(var i=0;i<categories.length;i++){\r\n                    if(categories[i].parent==current_category_id || current_category_id==0){\r\n                       \$('#subcategories_list').append('<option value='+categories[i].id+' title=\"'+categories[i].name+'\">'+categories[i].name+'</option>');\r\n                    }\r\n                }\r\n                \$('#subcategories_list').selectpicker('refresh');\r\n            }\r\n            \r\n            \r\n            \r\n            \r\n        </script>\r\n    </head>\r\n    <body>\r\n        \r\n        ";
include "application/mvc/views/topMenu.php";
echo "        <div class=\"container\" >\r\n            <div class=\"panel panel-default\">\r\n                <div class=\"panel-body\" style=\"margin-top: 50px;\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-lg-12\" >           \r\n                            <table id=\"transfers_table\" class=\"table table-striped table-bordered \" cellspacing=\"0\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th style=\"width: 30px;\">ID</th>\r\n                                        <th style=\"width: 110px;\">Transfer Date</th>\r\n                                        <th>Description</th>\r\n                                        <th style=\"width: 100px;\">Source</th>\r\n                                        \r\n                                        <th style=\"width: 90px;\">Destination</th>\r\n                                        <th style=\"width: 75px;\">Source Sync </th>\r\n                                        <th style=\"width: 100px;\">Destination Sync </th>\r\n                                        <th style=\"width: 110px;\">Verified By</th>\r\n                                        <th style=\"width: 70px;\">Amount</th>\r\n                                        <th>Submitted</th>\r\n                                        <th style=\"width: 50px;\">&nbsp;</th>\r\n                                        <th style=\"width: 50px;\">&nbsp;</th>\r\n                                        <th style=\"width: 60px;\">&nbsp;</th>\r\n                                        <th style=\"width: 115px;\">&nbsp;</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tfoot>\r\n                                    <tr>\r\n                                        <th>ID</th>\r\n                                        <th>Transfer Date</th>\r\n                                        <th>Description</th>\r\n                                        <th>Source</th>\r\n                                        \r\n                                        <th>Destination</th>\r\n                                        <th>Source Synced</th>\r\n                                        <th>Destination Synced</th>\r\n                                        <th>Verified By</th>\r\n                                        <th>Amount</th>\r\n                                         <th>&nbsp;</th>\r\n                                        <th>&nbsp;</th>\r\n                                        <th>&nbsp;</th>\r\n                                        <th>&nbsp;</th>\r\n                                        <th>&nbsp;</th>\r\n                                    </tr>\r\n                                </tfoot>\r\n                                <tbody></tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"sk-circle-layer\">\r\n            <div class=\"sk-circle\">\r\n                <div class=\"sk-circle1 sk-child\"></div>\r\n                <div class=\"sk-circle2 sk-child\"></div>\r\n                <div class=\"sk-circle3 sk-child\"></div>\r\n                <div class=\"sk-circle4 sk-child\"></div>\r\n                <div class=\"sk-circle5 sk-child\"></div>\r\n                <div class=\"sk-circle6 sk-child\"></div>\r\n                <div class=\"sk-circle7 sk-child\"></div>\r\n                <div class=\"sk-circle8 sk-child\"></div>\r\n                <div class=\"sk-circle9 sk-child\"></div>\r\n                <div class=\"sk-circle10 sk-child\"></div>\r\n                <div class=\"sk-circle11 sk-child\"></div>\r\n                <div class=\"sk-circle12 sk-child\"></div>\r\n            </div>\r\n        </div>\r\n    </body>\r\n</html>\r\n\r\n";

?>