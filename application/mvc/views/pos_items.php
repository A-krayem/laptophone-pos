<?php
/*
 * @ https://EasyToYou.eu - IonCube v11 Decoder Online
 * @ PHP 5.6
 * @ Decoder version: 1.0.4
 * @ Release: 02/06/2020
 *
 * @ ZendGuard Decoder PHP 5.6
 */

// Decoded file for php version 53.
echo "<!DOCTYPE html>\r\n<!--\r\nTo change this license header, choose License Headers in Project Properties.\r\nTo change this template file, choose Tools | Templates\r\nand open the template in the editor.\r\n-->\r\n<html>\r\n    <head>\r\n        <title>";
echo $_SESSION["page_title"];
echo " POS Items</title>\r\n        <meta charset=\"UTF-8\">\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n        <link rel=\"icon\" type=\"image/png\" href=\"resources/favicon.png\">\r\n        \r\n        \r\n        <script src=\"libraries/jquery-3.1.1.min.js\" type=\"text/javascript\"></script>\r\n\r\n        <script src=\"libraries/bootstrap-3.3.7-dist/js/bootstrap.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-3.3.7-dist/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/js/bootstrap-select.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/css/bootstrap-select.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/jquery.dataTables.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/dataTables.bootstrap.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/css/dataTables.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n\r\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/extensions/Select/js/dataTables.select.min.js\" type=\"text/javascript\"></script>\r\n\r\n        <script src=\"libraries/bootstrap-plugins/Buttons-1.2.4/js/dataTables.buttons.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/Buttons-1.2.4/js/buttons.bootstrap.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/Buttons-1.2.4/css/buttons.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/global_functions.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/global.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n\r\n        \r\n        <link href=\"application/mvc/views/custom_libraries/css/global.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/libs/bootstrap-confirmation.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/numeric.js\" type=\"text/javascript\"></script>\r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/store_items.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n        \r\n       <link href=\"application/mvc/views/custom_libraries/svgs/font/style.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/cleave.js-master/dist/cleave.min.js\" type=\"text/javascript\"></script>\r\n        <style type=\"text/css\">\r\n            \r\n            .container,.panel {\r\n                height:100%;\r\n                width: 100%;\r\n                padding: 0px !important;\r\n                margin: 0px !important;\r\n            }\r\n\r\n            \r\n            .table>tfoot>tr>th{\r\n                font-size: 12px !important;\r\n                background-color: #F3F3F3;\r\n                padding: 2px;\r\n                border: none !important;\r\n            }\r\n            \r\n            .dataTables_filter { display: none; }\r\n            \r\n            .input-sm{\r\n                height: 25px !important;\r\n            }\r\n            \r\n            .selected{\r\n                background-color: #337ab7 !important;\r\n                color: #ffffff !important;\r\n            }\r\n            \r\n            .search_filter{\r\n                width: 100% !important;\r\n                color: #000;\r\n            }\r\n            \r\n            \r\n            ::-webkit-input-placeholder { /* Chrome/Opera/Safari */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            ::-moz-placeholder { /* Firefox 19+ */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            :-ms-input-placeholder { /* IE 10+ */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            :-moz-placeholder { /* Firefox 18- */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            \r\n            /* enable absolute positioning */\r\n            .inner-addon { \r\n                position: relative; \r\n            }\r\n\r\n            /* style icon */\r\n            .inner-addon .glyphicon {\r\n              position: absolute;\r\n              padding: 6px;\r\n              pointer-events: none;\r\n            }\r\n\r\n            /* align icon */\r\n            .left-addon .glyphicon  { left:  0px;}\r\n            .right-addon .glyphicon { right: 0px;}\r\n\r\n            /* add padding  */\r\n            .left-addon input  { padding-left:  5px; }\r\n            .right-addon input { padding-right: 5px; }\r\n            \r\n            .phone-input{\r\n                    margin-bottom:8px;\r\n            }\r\n            \r\n            .confirmation {\r\n                width: 160px;\r\n            }\r\n            \r\n            .list-group-item{\r\n                border: none !important;\r\n            }\r\n            \r\n            div.toolbar h3{\r\n                margin-top: 0px !important;\r\n            }\r\n            \r\n            .dataTable>tfoot>tr>th{\r\n                /* width: 50px !important; */\r\n            }\r\n            \r\n            .item_icon{\r\n                font-size: 18px;\r\n            }\r\n            .addon_item_icon input{\r\n                padding-left: 30px !important;\r\n            }\r\n            \r\n            #items_store_table .form-control{\r\n                height: 20px;\r\n            }\r\n            \r\n            #items_store_table .btn{\r\n                padding: 0px !important;\r\n                padding-left: 5px!important;\r\n            } \r\n            \r\n            \r\n       \r\n        </style>\r\n\r\n        <script type=\"text/javascript\">\r\n            var items_store_table = null;\r\n            var stores = [];\r\n            \r\n            var current_store_id = null;\r\n            \r\n            var users_options = \"<option value='0'>All</option>\";\r\n            ";
for ($i = 0; $i < count($data["users"]); $i++) {
    echo "                users_options += \"<option selected value='";
    echo $data["users"][$i]["id"];
    echo "'>";
    echo $data["users"][$i]["username"];
    echo "</option>\";\r\n                ";
}
echo "               \r\n            function init(){\r\n                \$('#items_store_table').show();\r\n\r\n                 var search_fields = [0,1,2,3,4];\r\n                 var index = 0;\r\n                 \$('#items_store_table tfoot th').each( function () {\r\n                     if(jQuery.inArray(index, search_fields) !== -1){\r\n                         var title = \$(this).text();\r\n                         \$(this).html( '<div class=\"inner-addon left-addon\"><input style=\"width: 100% !important;\"  class=\"form-control input_sm_search\" type=\"text\" placeholder=\" '+title+'\" /></div>' );\r\n                         index++;\r\n                     }\r\n                 });\r\n\r\n                 items_store_table = \$('#items_store_table').dataTable({\r\n                     ajax: \"?r=pos&f=getItemInStore_for_pos_col&p0=\"+current_store_id,\r\n                     orderCellsTop: true,\r\n                     aoColumnDefs: [\r\n                         { \"targets\": [0], \"searchable\": true, \"orderable\": true, \"visible\": true },\r\n                         { \"targets\": [1], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                         { \"targets\": [2], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                         { \"targets\": [3], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                         { \"targets\": [4], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                         { \"targets\": [5], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                         { \"targets\": [6], \"searchable\": true, \"orderable\": false, \"visible\": false },\r\n                         { \"targets\": [7], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                     ],\r\n                    scrollY: '47vh',\r\n                    scrollCollapse: true,\r\n                    \"paging\": true,           // Enable pagination\r\n                    \"pageLength\": 50, \r\n                    \"lengthChange\": true,\r\n                    \"lengthMenu\": [50, 100, 250, 500], // Page length options \r\n                    //dom: '<\"toolbar\">frtlip',\r\n                    dom: '<\"row\"<\"col-sm-12 col-md-12\"<\"toolbar\">>><\"row\"<\"col-sm-12 col-md-6\"f>>' +\r\n                    '<\"row\"<\"col-sm-12\"tr>>' +\r\n                    '<\"row\"<\"col-sm-4 col-md-4\"l><\"col-sm-4 col-md-4\"i><\"col-sm-4 col-md-4\"p>>',\r\n                     initComplete: function( settings ) {\r\n\r\n                         var table = \$('#items_store_table').DataTable();\r\n                         table.row(':eq(0)', { page: 'current' }).select();\r\n                         \r\n                         var stores_option = \"\";\r\n                         for(var i=0;i<stores.length;i++){\r\n                             stores_option+='<option value='+stores[i].id+' title=\"'+stores[i].name+'\">'+stores[i].name+'</option>';\r\n                         }\r\n\r\n                         \$(\"div.toolbar\").html('<h3><i class=\"glyphicon glyphicon-briefcase\"></i>&nbsp;Add items to POS interface</h3>\\n\\\r\n                            <div class=\"btn-group\" role=\"group\" aria-label=\"\" style=\"display:none\">\\n\\\r\n                                 <select id=\"store_list\" class=\"selectpicker\" onchange=\"store_changed()\">\\n\\\r\n                                     '+stores_option+'\\n\\\r\n                                 </select>\\n\\\r\n                             </div>\\n\\\r\n                             <div id=\"tab_toolbar\" class=\"btn-group\" role=\"group\" aria-label=\"\">\\n\\\r\n                                <button onclick=\"addItem_()\" type=\"button\" class=\"btn btn-primary\"><i class=\"glyphicon glyphicon-plus\"></i>&nbsp;Add</button>\\n\\\r\n                                <button onclick=\"removeItem_()\" type=\"button\" class=\"btn btn-primary\"><i class=\"glyphicon glyphicon-trash\"></i>&nbsp;Remove</button>\\n\\\r\n                             </div>\\n\\\r\n                         ');\r\n\r\n                         \$('.selectpicker').selectpicker();\r\n                         if(table.rows().count()==0){\r\n                             \$(\"#tab_toolbar button.btn\").addClass(\"disabled\");\r\n                         }\r\n                         \r\n                         \$(\".sk-circle-layer\").hide();\r\n                         \r\n                     },\r\n                     fnRowCallback: function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {\r\n                         \$(nRow).addClass(aData[0]);\r\n                     },\r\n                     fnDrawCallback: setOptions,\r\n                 });\r\n\r\n                 \r\n                 \$('#items_store_table').on( 'page.dt', function () {\r\n                    \$(\".selected\").removeClass(\"selected\");\r\n                    \$(\"#tab_toolbar button.btn\").addClass(\"disabled\");\r\n                } );\r\n\r\n                 \$('#items_store_table').DataTable().columns().every( function () {\r\n                     var that = this;\r\n                     \$( 'input', this.footer() ).on( 'keyup change', function () {\r\n                         \r\n                        \$('.selected').removeClass(\"selected\");\r\n                        if(\$(\"#tab_toolbar button.btn\").hasClass(\"disabled\")==false){\r\n                            \$(\"#tab_toolbar button.btn\").addClass(\"disabled\");\r\n                        }\r\n                        \r\n                         if ( that.search() !== this.value ) {\r\n                             that.search( this.value ).draw();\r\n                         }\r\n                     } );\r\n                 } );\r\n                 \r\n                 \r\n                 \$('#items_store_table').DataTable().on('mousedown',\"tr\", function ( e, dt, type, indexes ) { \r\n                    \$('.selected').removeClass(\"selected\");\r\n                    \$(this).addClass('selected');\r\n                    \$(\"#tab_toolbar button.btn\").removeClass(\"disabled\");\r\n                });\r\n           }\r\n           \r\n           function pos_user_changed(id){\r\n                \$.getJSON(\"?r=pos&f=update_user_pos_col&p0=\"+id+\"&p1=\"+\$(\"#pos_users_\"+id).val() , function (data) {\r\n                    \r\n                }).done(function () {\r\n                    \r\n                });\r\n           }\r\n           \r\n            function setOptions(){   \r\n                var table = \$('#items_store_table').DataTable();\r\n                var p = table.rows({ page: 'current' }).nodes();\r\n                for (var k = 0; k < p.length; k++){\r\n                    var index = table.row(p[k]).index();\r\n                    var id = table.cell(index,0).data().split('-')[1];\r\n                    table.cell(index,5).data('<input value=\"'+parseInt(table.cell(index,6).data())+'\" onchange=\"posit_changed('+parseInt(id)+')\" id=\"posit_'+parseInt(id)+'\" style=\"width:100%\" class=\"form-control input-sm\" type=\"number\">');\r\n                    \r\n                    table.cell(index,7).data('<button onclick=\"assign_user_to_pos_col('+parseInt(table.cell(index,0).data().split('-')[1])+')\" style=\"width:100%\" type=\"button\" class=\"btn btn-default btn-xs\">Assign</button>');                    \r\n                }\r\n            }\r\n            \r\n            function assign_user_to_pos_col(id){\r\n                var _data = [];\r\n                \$.getJSON(\"?r=pos&f=get_users_assigned&p0=\"+id , function (data) {\r\n                    _data = data;\r\n                }).done(function () {\r\n                    vals = JSON.parse(\"[\"+_data[0].pos_col_users+\"]\");\r\n                    var modal_name = \"modal_assign_user_to_pos_col\";\r\n                    var modal_title = \"Assign users\";\r\n                    var content =\r\n                    '<div class=\"modal small\" data-backdrop=\"static\" id=\"'+modal_name+'\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"payment_info__\" aria-hidden=\"true\">\\n\\\r\n                        <div class=\"modal-dialog\" role=\"document\">\\n\\\r\n                            <div class=\"modal-content\">\\n\\\r\n                               <div class=\"modal-header\" style=\"padding-top:5px;padding-bottom:5px;\">\\n\\\r\n                                    <h3 class=\"modal-title\">'+modal_title+'<i style=\"float:right;font-size:34px;\" class=\"glyphicon glyphicon-remove\" onclick=\"modal_close(\\''+modal_name+'\\')\"></i></h3>\\n\\\r\n                                </div>\\n\\\r\n                                <div class=\"modal-body\" style=\"padding-top:2px;\">\\n\\\r\n                                    <div class=\"row\">\\n\\\r\n                                        <div class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\" style=\"margin-top:10px;\">\\n\\\r\n                                            <div class=\"form-group\" style=\"margin-bottom:5px;\">\\n\\\r\n                                                <select id=\"pos_users_'+id+'\" onchange=\"pos_user_changed('+id+')\" class=\"form-control selectpicker\" style=\"width:100%\" multiple>'+users_options+'</select>\\n\\\r\n                                            </div>\\n\\\r\n                                        </div>\\n\\\r\n                                    </div>\\n\\\r\n                                </div>\\n\\\r\n                            </div>\\n\\\r\n                        </div>\\n\\\r\n                    </div>';\r\n                    \$(\"#\"+modal_name).remove();\r\n                    \$(\"body\").append(content);\r\n\r\n                    \$('#'+modal_name).on('show.bs.modal', function (e) {\r\n\r\n                    });\r\n\r\n                    \$('#'+modal_name).on('shown.bs.modal', function (e) {\r\n                        \$('#pos_users_'+id).selectpicker('val',vals);\r\n                    });\r\n                    \$('#'+modal_name).on('hide.bs.modal', function (e) {\r\n                        \$(\"#\"+modal_name).remove();\r\n                    });\r\n                    \$('#'+modal_name).modal('show');\r\n                });\r\n                \r\n            }\r\n            \r\n            function posit_changed(id){\r\n                \$.getJSON(\"?r=pos&f=posit_changed&p0=\"+id+\"&p1=\"+\$(\"#posit_\"+id).val() , function (data) {\r\n                    \r\n                }).done(function () {\r\n                    \r\n                });\r\n            }\r\n           \r\n            \$(document).ready(function () {\r\n                \$(\".sk-circle\").center();\r\n                \$(\".sk-circle-layer\").show();\r\n                \$.getJSON(\"?r=store&f=getStores\", function (data) {\r\n                    \$.each(data, function (key, val) {\r\n                        if(current_store_id==null){\r\n                            current_store_id = val.id;\r\n                        }\r\n                        stores.push({id:val.id,location:val.location,name:val.name});\r\n                    });\r\n                }).done(function () {\r\n                    init(); \r\n                });\r\n            });\r\n            \r\n            function addItem_(){\r\n                var dt = \$('#items_store_table').DataTable();\r\n                var id = dt.row('.selected', 0).data()[0];\r\n \r\n      \r\n                \r\n                \$(\".sk-circle-layer\").show();\r\n                \r\n                \$.getJSON(\"?r=pos&f=add_item_to_interface&p0=\"+parseInt(id.split('-')[1])+\"&p1=\"+\$(\"#store_list\").val() , function (data) {\r\n                    \r\n                }).done(function () {\r\n                    var table = \$('#items_store_table').DataTable();\r\n                    table.ajax.url(\"?r=pos&f=getItemInStore_for_pos_col&p0=\"+current_store_id).load(function () {\r\n                        table.row('.' + padItem(parseInt(id.split('-')[1])), {page: 'current'}).select();\r\n                        \$(\".sk-circle-layer\").hide();\r\n                    },false);\r\n                });\r\n            }\r\n            \r\n            function removeItem_(){\r\n                \r\n                \r\n                var dt = \$('#items_store_table').DataTable();\r\n                var id = dt.row('.selected', 0).data()[0];\r\n                \r\n                \$(\".sk-circle-layer\").show();\r\n                \r\n                \$.getJSON(\"?r=pos&f=remove_item_to_interface&p0=\"+parseInt(id.split('-')[1])+\"&p1=\"+\$(\"#store_list\").val() , function (data) {\r\n                    \r\n                }).done(function () {\r\n                    var table = \$('#items_store_table').DataTable();\r\n                    table.ajax.url(\"?r=pos&f=getItemInStore_for_pos_col&p0=\"+current_store_id).load(function () {\r\n                        table.row('.' + padItem(parseInt(id.split('-')[1])), {page: 'current'}).select();\r\n                        \$(\".sk-circle-layer\").hide();\r\n                    },false);\r\n                });\r\n            }\r\n            \r\n            function store_changed(){\r\n                \r\n                \$(\".sk-circle-layer\").show();\r\n                current_store_id = \$(\"#store_list\").val();\r\n                var table = \$('#items_store_table').DataTable();\r\n                \$(\"#tab_toolbar button.btn\").addClass(\"disabled\");\r\n                table.ajax.url(\"?r=pos&f=getItemInStore_for_pos_col&p0=\"+current_store_id).load(function () {\r\n                    \$(\".sk-circle-layer\").hide();\r\n                }, false);\r\n            }\r\n            \r\n            \t\r\n        </script>\r\n    </head>\r\n    <body>\r\n        \r\n        <!-- Navbar fixed top -->\r\n        ";
include "application/mvc/views/topMenu.php";
echo "        <div class=\"container\" >\r\n            <div class=\"panel panel-default\">\r\n                <div class=\"panel-body\" style=\"margin-top: 50px;\">\r\n                    <div class=\"row\"  >\r\n                        <div class=\"col-lg-12\" >           \r\n                            <table id=\"items_store_table\" class=\"table table-striped table-bordered\" cellspacing=\"0\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th style=\"width: 80px !important;\">Item Ref.</th>\r\n                                        <th style=\"width: 150px !important;\">Sup. Ref.</th>\r\n                                        <th style=\"width: 150px !important;\">Barcode</th>\r\n                                        <th>Description</th>\r\n                                        <th style=\"width: 100px !important;\">On POS interface</th>\r\n                                        <th style=\"width: 70px !important;\">Order</th>\r\n                                        <th>Old Order</th>\r\n                                        <th style=\"width: 90px !important;\">Users</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tfoot>\r\n                                    <tr>\r\n                                        <th>Ref.</th>\r\n                                        <th>Sup. Ref.</th>\r\n                                        <th>Barcode</th>\r\n                                        <th>Description</th>\r\n                                        <th>On POS interface</th>\r\n                                        <th></th>\r\n                                        <th></th>\r\n                                        <th></th>\r\n                                    </tr>\r\n                                </tfoot>\r\n                                <tbody></tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"sk-circle-layer\">\r\n            <div class=\"sk-circle\">\r\n                <div class=\"sk-circle1 sk-child\"></div>\r\n                <div class=\"sk-circle2 sk-child\"></div>\r\n                <div class=\"sk-circle3 sk-child\"></div>\r\n                <div class=\"sk-circle4 sk-child\"></div>\r\n                <div class=\"sk-circle5 sk-child\"></div>\r\n                <div class=\"sk-circle6 sk-child\"></div>\r\n                <div class=\"sk-circle7 sk-child\"></div>\r\n                <div class=\"sk-circle8 sk-child\"></div>\r\n                <div class=\"sk-circle9 sk-child\"></div>\r\n                <div class=\"sk-circle10 sk-child\"></div>\r\n                <div class=\"sk-circle11 sk-child\"></div>\r\n                <div class=\"sk-circle12 sk-child\"></div>\r\n            </div>\r\n        </div>\r\n    </body>\r\n</html>\r\n\r\n";

?>