<?php
/*
 * @ https://EasyToYou.eu - IonCube v11 Decoder Online
 * @ PHP 5.6
 * @ Decoder version: 1.0.4
 * @ Release: 02/06/2020
 *
 * @ ZendGuard Decoder PHP 5.6
 */

// Decoded file for php version 53.
echo "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Pre Invoices</title>\r\n  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n  <link href=\"application/mvc/views/device/datatable/datatables.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n  <link href=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css\" rel=\"stylesheet\">\r\n  \r\n  \r\n  <link href=\"application/mvc/views/device/jquery-confirm-v3.3.4/dist/jquery-confirm.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n  \r\n  <style>\r\n    /* Custom CSS for adjusting font size */\r\n    #items_preinvoice tbody td {\r\n        font-size: 14px; \r\n    }\r\n    \r\n    \r\n    #preinvoices_search tbody td {\r\n        font-size: 12px; \r\n    }\r\n    \r\n    #preinvoices_search thead th {\r\n        font-size: 12px; \r\n    }\r\n    \r\n    \r\n    .sfs{\r\n       \r\n    }\r\n  \r\n    \r\n    .text-center {\r\n        text-align: center !important;\r\n    }\r\n    .text-left {\r\n        text-align: left !important;\r\n    }\r\n    \r\n    #items_preinvoice th {\r\n      font-size: 16px !important; /* Adjust the font size as needed */\r\n    }\r\n    \r\n    .highlight {\r\n        background-color: #cafbfb !important; /* Change this color as needed */\r\n       \r\n    }\r\n    \r\n    .underline{\r\n        text-decoration: underline !important;\r\n        font-size: 16px !important;\r\n    }\r\n    \r\n    .bi-trash{\r\n        float: left;\r\n        color: red;\r\n        cursor: pointer;\r\n        font-size: 16px !important;\r\n    }\r\n    \r\n    #search_barcode{\r\n        background-color: #cafbfb !important;\r\n    }\r\n    \r\n    #search_barcode_manual{\r\n        background-color: #f5c798 !important;\r\n    }\r\n    \r\n    .pad_r{\r\n        padding-right: 1px !important;\r\n    }\r\n    \r\n  \r\n    .select2-container .select2-selection--single{\r\n        height: 32px !important;\r\n    }\r\n    \r\n    .dataTables_filter {\r\n      margin-bottom: 10px !important; /* Adjust the space as needed */\r\n       margin-top: 10px !important; /* Adjust the space as needed */\r\n    }\r\n    \r\n    table.dataTable>thead>tr>th, table.dataTable>thead>tr>td{\r\n        padding: 5px !important;\r\n        font-size: 12px !important;\r\n    }\r\n\r\n    .custom-modal-class {\r\n        width: 95% !important;\r\n        max-width: none !important; /* Ensure it overrides any max-width property */\r\n        \r\n        \r\n        max-height: 90vh; /* Set max height to 90% of viewport height */\r\n        overflow-y: auto; /* Add scrollbar when content exceeds max height */\r\n    }\r\n   \r\n    \r\n    .modal-body {\r\n    max-height: calc(100vh - 200px); /* Adjust as needed */\r\n    overflow-y: auto;\r\n}\r\n\r\n.qty_css{\r\n    font-weight: bold;\r\n}\r\n\r\n  </style>\r\n</head>\r\n<body>\r\n\r\n    \r\n    <div class=\"container\">\r\n        <div class=\"row mt-2\">\r\n               \r\n            <div class=\"col-12 px-3\">\r\n                <select class=\"form-control\" id=\"select-client\" onchange=\"client_changed()\"></select>\r\n            </div>    \r\n        </div>\r\n        \r\n        <div class=\"row mt-2\">\r\n\r\n            <div class=\"col-6\">\r\n                <button type=\"button\" class=\"btn btn-secondary btn-sm\" style=\"width: 100%\" onclick=\"show_preinvoices()\">Pre-Invoices <b id=\"curid\"></b></button>\r\n            </div> \r\n            <div class=\"col-6\">\r\n                <button type=\"button\" class=\"btn btn-success btn-sm\" style=\"width: 100%\" onclick=\"prepare_new_invoice()\" id=\"cr_inv_btn\">Create Pre-Invoice</button>\r\n            </div>    \r\n        </div>\r\n        \r\n        <div class=\"row mt-2\">    \r\n            <div class=\"col-8\">\r\n                <input style=\"width:100%\" type=\"text\" class=\"form-control form-control-md text-center\" placeholder=\"Click here and scan barcode\" id=\"search_barcode\" oninput=\"barcode_scanned()\">\r\n                <input style=\"width:100%; display: none\" type=\"text\" class=\"form-control form-control-md text-center\" placeholder=\"Manually input barcode\" id=\"search_barcode_manual\"  onchange=\"barcode_scanned_manual()\">\r\n            </div> \r\n            <div class=\"col-4\">\r\n               \r\n                <div class=\"form-check form-switch\">\r\n                    <input class=\"form-check-input\" style=\"height: 30px; width: 60px;\" type=\"checkbox\" checked=\"\" id=\"switchButton\" onchange=\"switch_changed()\">&nbsp;&nbsp;\r\n                    <label class=\"form-check-label\" for=\"switchButton\" style=\"margin-top: 10px; font-size: 10px;\">Scanner</label>\r\n                  </div>\r\n            </div> \r\n        </div>\r\n        <div class=\"table-responsive\">\r\n            <table id=\"items_preinvoice\" class=\"table table-striped table-bordered\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>&nbsp;</th>\r\n                        <th>CODE</th>\r\n                        <th>DESCRIPTION</th>\r\n                        <th>PR.</th>\r\n                        <th>QTY</th>\r\n                        <th>T.</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n\r\n<script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js\"></script>\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js\"></script>\r\n<script src=\"application/mvc/views/device/datatable/datatables.min.js\" type=\"text/javascript\"></script>\r\n<script src=\"application/mvc/views/device/js.js?rnd=";
echo self::generateRandomStringComplex_alway_dynamic();
echo "\" type=\"text/javascript\"></script>\r\n\r\n<script src=\"application/mvc/views/device/jquery-confirm-v3.3.4/dist/jquery-confirm.min.js\" type=\"text/javascript\"></script>\r\n\r\n\r\n<script type=\"text/javascript\">\r\n    var timeoutId=null;\r\n    \r\n    function switch_changed(){\r\n        var isChecked = \$(\"#switchButton\").prop('checked');\r\n        if(isChecked){\r\n            \$('#search_barcode_manual').hide();\r\n            \$('#search_barcode').show();\r\n        }else{\r\n            \$('#search_barcode_manual').show();\r\n            \$('#search_barcode').hide();\r\n        }\r\n    }\r\n    \r\n    function barcode_scanned_manual(){\r\n        if(current_id==0){\r\n             \$.alert({\r\n                title: 'Alert!',\r\n                content: 'Pre-invoice not selected or not created!',\r\n            });\r\n            \$(\"#search_barcode_manual\").val(\"\");\r\n            return;\r\n        }\r\n        if(\$(\"#search_barcode_manual\").val().length>0){\r\n            add_item_prepare_invoice_by_barcode(\$(\"#search_barcode_manual\").val());\r\n        }\r\n    }\r\n    \r\n    \r\n    \r\n    function barcode_scanned(){\r\n       \r\n        if(current_id==0){\r\n             \$.alert({\r\n                title: 'Alert!',\r\n                content: 'Pre-invoice not selected or not created!',\r\n            });\r\n            \$(\"#search_barcode\").val(\"\");\r\n            return;\r\n        }\r\n        if(timeoutId){\r\n            clearTimeout(timeoutId);\r\n        }\r\n        timeoutId=setTimeout(function(){\r\n            if(\$(\"#search_barcode\").val().length>0){\r\n                add_item_prepare_invoice_by_barcode(\$(\"#search_barcode\").val());\r\n            }\r\n        },500);\r\n    }\r\n    \r\n   \r\n    \r\n    function delete_item(id){\r\n        \$.confirm({\r\n            title: 'Delete Item!',\r\n            content: 'Are you sure?',\r\n            buttons: {\r\n                confirm: function () {\r\n\r\n                    var _data=[];\r\n                    \$.getJSON(\"?r=invoice&f=delete_item_from_preinvoice&p0=\"+id+\"&p1=\"+current_id, function(data) {\r\n                        _data=data;\r\n                    }).done(function() {\r\n                        refresh_table_of_items(current_id);\r\n                    });\r\n\r\n                },\r\n                somethingElse: {\r\n                    text: 'Cancel',\r\n                    btnClass: 'btn-danger',\r\n\r\n                    action: function () {\r\n                        \r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    \r\n    \$(document).ready(function() {\r\n      \r\n      \$('#items_preinvoice').DataTable({\r\n            \"ajax\": \"?r=invoice&f=get_pre_invoice_items&p0=\"+current_id,\r\n            columnDefs: [\r\n                { width: '20px', targets: 0,\"sortable\": false,className: \"text-center \",visible:false  }, \r\n                { width: '50px', targets: 1,\"sortable\": false,className: \"text-left sfs\",visible:false  }, \r\n                {  targets: 2,\"sortable\": false,className: \"pad_r\" }, \r\n                { width: '50px',\"sortable\": false, targets: 3 ,className: \"text-center\"},\r\n                { width: '50px',\"sortable\": false, targets: 4 ,className: \"text-center underline\"},\r\n                { width: '50px',\"sortable\": false, targets: 5 ,className: \"text-center \"},\r\n            ],\r\n            scrollY: 500, // Adjust the height as needed\r\n            scrollCollapse: true,\r\n            paging: false,\r\n            fixedHeader: true,\r\n            language: {\r\n            search: \"Search In Table<br/>\" // Change the search text here\r\n          }\r\n      });\r\n      \r\n      \$('#items_preinvoice tbody').on('click', 'tr', function() {\r\n        if (\$(this).hasClass('highlight')) {\r\n          \$(this).removeClass('highlight');\r\n        } else {\r\n            \r\n            var table=\$('#items_preinvoice').DataTable();\r\n          table.\$('tr.highlight').removeClass('highlight');\r\n          \$(this).addClass('highlight');\r\n        }\r\n      });\r\n      \r\n      \r\n      \r\n      \r\n      // Initialize Select2\r\n        \$('#select-client').select2({\r\n            placeholder: 'Select existing client',\r\n            ajax: {\r\n                url: '?r=customers&f=search',\r\n                data: function (params) {\r\n                    var query = {\r\n                        p0: params.term || \"\",\r\n                        p1: params.page || 1\r\n                    }\r\n\r\n                    // Query parameters will be ?search=[term]&type=public\r\n                    return query;\r\n                },\r\n                delay: 250,\r\n                dataType: 'json',\r\n                processResults: function (data) {\r\n                    return data;\r\n                }\r\n            },\r\n\r\n          minimumInputLength: 1 // Minimum characters before AJAX call is made\r\n        });\r\n  \r\n  });\r\n</script>\r\n\r\n</body>\r\n</html>\r\n";

?>