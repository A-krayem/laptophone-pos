<?php
/*
 * @ https://EasyToYou.eu - IonCube v11 Decoder Online
 * @ PHP 5.6
 * @ Decoder version: 1.0.4
 * @ Release: 02/06/2020
 *
 * @ ZendGuard Decoder PHP 5.6
 */

// Decoded file for php version 53.
echo "<!DOCTYPE html>\r\n<!--\r\nTo change this license header, choose License Headers in Project Properties.\r\nTo change this template file, choose Tools | Templates\r\nand open the template in the editor.\r\n-->\r\n<html>\r\n    <head>\r\n        <title>";
echo $_SESSION["page_title"];
echo " Customer Statement</title>\r\n        <meta charset=\"UTF-8\">\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n        <link rel=\"icon\" type=\"image/png\" href=\"resources/favicon.png\">\r\n        \r\n        <script src=\"libraries/jquery-3.1.1.min.js\" type=\"text/javascript\"></script>\r\n\r\n        <script src=\"libraries/bootstrap-3.3.7-dist/js/bootstrap.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-3.3.7-dist/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/jquery.dataTables.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/dataTables.bootstrap.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/css/dataTables.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n\r\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/extensions/Select/js/dataTables.select.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/manual_invoice.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/export/buttons.dataTables.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/bootstrap-plugins/export/dataTables.buttons.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/export/jszip.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/export/vfs_fonts.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/export/buttons.html5.min.js\" type=\"text/javascript\"></script>\r\n         <script src=\"libraries/bootstrap-plugins/bootstrap3-typeahead/bootstrap3-typeahead.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/Buttons-1.2.4/js/buttons.bootstrap.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/Buttons-1.2.4/css/buttons.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n                   <link href=\"application/mvc/views/custom_libraries/css/select2.min.css?v=2\" rel=\"stylesheet\" type=\"text/css\" />\r\n    <script src=\"application/mvc/views/custom_libraries/javascripts/select2.full.min.js\" type=\"text/javascript\"></script>\r\n    \r\n    \r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/global_functions.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/global.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n\r\n        <script src=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/js/bootstrap-select.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/css/bootstrap-select.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <link href=\"application/mvc/views/custom_libraries/css/global.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/libs/bootstrap-confirmation.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n       \r\n        <link href=\"application/mvc/views/custom_libraries/svgs/font/style.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/stock_invoices.js\" type=\"text/javascript\"></script>\r\n        \r\n        <script src=\"libraries/bootstrap-plugins/daterangepicker-master/moment.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/bootstrap-plugins/daterangepicker-master/daterangepicker.js\" type=\"text/javascript\"></script>\r\n        <link href=\"libraries/bootstrap-plugins/daterangepicker-master/daterangepicker.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        \r\n        \r\n          <link href=\"libraries/bootstrap-plugins/datepicker-master/dist/css/bootstrap-datepicker.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/bootstrap-plugins/datepicker-master/dist/js/bootstrap-datepicker.min.js\" type=\"text/javascript\"></script>\r\n        <script src=\"libraries/jquery.mask.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        <script src=\"libraries/numeric.js\" type=\"text/javascript\"></script>\r\n        \r\n        \r\n        <script src=\"application/mvc/views/custom_libraries/javascripts/customers.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\r\n\r\n        <link href=\"libraries/bootstrap-plugins/lightbox-master/dist/ekko-lightbox.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n        <script src=\"libraries/bootstrap-plugins/lightbox-master/dist/ekko-lightbox.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        \r\n                <script src=\"libraries/cleave.js-master/dist/cleave.min.js\" type=\"text/javascript\"></script>\r\n        \r\n        <script src=\"libraries/jquery-toast-plugin-master/dist/jquery.toast.min.js\" type=\"text/javascript\"></script>\r\n         <link href=\"libraries/jquery-toast-plugin-master/dist/jquery.toast.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n\r\n         <script src=\"application/mvc/views/custom_libraries/javascripts/jquery-confirm.min.js\" type=\"text/javascript\"></script>\r\n        <link href=\"application/mvc/views/custom_libraries/css/jquery-confirm.min.css\" rel=\"stylesheet\" type=\"text/css\" /> \r\n                \r\n                \r\n        <style type=\"text/css\">\r\n            .container,.panel {\r\n                height:100%;\r\n                width: 100%;\r\n                padding: 0px !important;\r\n                margin: 0px !important;\r\n            }\r\n            \r\n            .table>tfoot>tr>th{\r\n                font-size: 12px !important;\r\n                background-color: #F3F3F3;\r\n                padding: 2px;\r\n                border: none !important;\r\n            }\r\n            \r\n            .dataTables_filter{ display: none; }\r\n            \r\n            .input-sm{\r\n               \r\n            }\r\n            \r\n            .selected{\r\n                background-color: #337ab7 !important;\r\n                color: #ffffff !important;\r\n            }\r\n            \r\n            .search_filter{\r\n                width: 100% !important;\r\n                color: #000;\r\n            }\r\n            \r\n            \r\n            ::-webkit-input-placeholder { /* Chrome/Opera/Safari */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            ::-moz-placeholder { /* Firefox 19+ */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            :-ms-input-placeholder { /* IE 10+ */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            :-moz-placeholder { /* Firefox 18- */\r\n                color: #337ab7;\r\n                opacity: 0.9;\r\n            }\r\n            \r\n            /* enable absolute positioning */\r\n            .inner-addon { \r\n                position: relative; \r\n            }\r\n\r\n            /* style icon */\r\n            .inner-addon .glyphicon {\r\n              position: absolute;\r\n              padding: 6px;\r\n              padding-top: 8px;\r\n              pointer-events: none;\r\n            }\r\n\r\n            /* align icon */\r\n            .left-addon .glyphicon  { left:  0px;}\r\n            .right-addon .glyphicon { right: 0px;}\r\n\r\n            /* add padding  */\r\n            .left-addon input  { padding-left:  5px; }\r\n            .right-addon input { padding-right: 30px; }\r\n            \r\n            .phone-input{\r\n                    margin-bottom:8px;\r\n            }\r\n            \r\n            .confirmation {\r\n                width: 160px;\r\n            }\r\n            \r\n            .list-group-item{\r\n                border: none !important;\r\n            }\r\n            \r\n            div.toolbar h3{\r\n                margin-top: 0px !important;\r\n            }\r\n            \r\n            .alignCenter{\r\n                text-align: center;\r\n            }\r\n            \r\n            .linethrough{\r\n                text-decoration: line-through;\r\n            }\r\n            \r\n            .btn-xs{\r\n                font-size: 14px !important;\r\n                width: 100%;\r\n                padding: 0px !important;\r\n            }\r\n            \r\n            .selected .final_remain{\r\n                color: #fff !important;\r\n            }\r\n        </style>\r\n\r\n        <script type=\"text/javascript\">\r\n            var customers_statement_table = null;\r\n            var all_customers = [];\r\n            \r\n            var current_customer_id = ";
echo $data["customer_id"];
echo ";\r\n            \r\n            var denieaccess = ";
echo $_SESSION["hide_critical_data"];
echo ";\r\n            \r\n            var all_currencies = [];\r\n            function get_all_customers(){\r\n                \$(\".sk-circle\").center();\r\n                \$(\".sk-circle-layer\").show();\r\n                \$.getJSON(\"?r=customers&f=getCustomers\", function (data) {\r\n                    \$.each(data, function (key, val) {\r\n                        all_customers.push({id:val.id,name:val.name});\r\n                    });\r\n                }).done(function () {\r\n                    \$.getJSON(\"?r=settings_info&f=get_needed_data\", function (data) {\r\n                        all_currencies = [];\r\n                        \$.each(data.currencies, function (key, val) {\r\n                            all_currencies.push({id:val.id,name:val.name,symbole:val.symbole,system_default:val.system_default,rate_to_system_default:val.rate_to_system_default});\r\n                        }); \r\n                    }).done(function () {\r\n                        init_statement();\r\n                    });\r\n                    \r\n                }); \r\n            }\r\n            \r\n            function customer_changed(){\r\n                if(\$(\"#customers_list\").val()!=0){\r\n                    \$(\"#pdatepickerbtn\").attr(\"disabled\", false);\r\n                    \$(\"#pdatepickerbtn_d\").attr(\"disabled\", false);\r\n                    \r\n                    \$(\"#payment_id\").show();\r\n                    \$(\"#print_soa\").show();\r\n                    \$(\"#print\").show();\r\n                    \$(\".tab_toolbar button.blueB\").removeClass(\"disabled\");\r\n                    var table = \$('#customers_statement_table').DataTable();\r\n                    table.ajax.url(\"?r=customers&f=get_customer_statement&p0=\"+\$(\"#customers_list\").val()).load(function () {\r\n                        \r\n                    });\r\n                }else{\r\n                    \$(\"#pdatepickerbtn\").attr(\"disabled\", true);\r\n                    \$(\"#pdatepickerbtn_d\").attr(\"disabled\", true);\r\n                    \r\n                    \$(\"#payment_id\").hide();\r\n                    \$(\"#print_soa\").hide();\r\n                    \r\n                    \$(\"#print\").hide();\r\n                    \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\r\n                }\r\n            }\r\n           \r\n            \$(document).ready(function () {\r\n                get_all_customers();\r\n            });\r\n            \r\n            function init_statement(){\r\n                \$('#items_table').show();\r\n                \r\n                \r\n\r\n                var search_fields = [0,1,2,3,4,5,6,7];\r\n                var index = 0;\r\n                \$('#customers_statement_table tfoot th').each( function () {\r\n                    if(jQuery.inArray(index, search_fields) !== -1){\r\n                        var title = \$(this).text();\r\n                        \$(this).html( '<div class=\"inner-addon left-addon\"><input style=\"width: 100% !important;\" class=\"form-control input_sm_search\" type=\"text\" placeholder=\" '+title+'\" /></div>' );\r\n                        index++;\r\n                    }\r\n                });\r\n                \r\n                customers_statement_table = \$('#customers_statement_table').dataTable({\r\n                    ajax: \"?r=customers&f=get_customer_statement&p0=\"+current_customer_id,\r\n                    orderCellsTop: true,\r\n                    aoColumnDefs: [\r\n                        { \"targets\": [0], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [1], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [2], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [3], \"searchable\": true, \"orderable\": false, \"visible\": true,sClass: \"alignCenter\" },\r\n                        { \"targets\": [4], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [5], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [6], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [7], \"searchable\": true, \"orderable\": false, \"visible\": true },\r\n                        { \"targets\": [8], \"searchable\": true, \"orderable\": false, \"visible\": false },\r\n                        { \"targets\": [9], \"searchable\": false, \"orderable\": false, \"visible\": true,sClass: \"alignCenter\" },\r\n                        { \"targets\": [10], \"searchable\": false, \"orderable\": false, \"visible\": false,sClass: \"alignCenter\" },\r\n                        { \"targets\": [11], \"searchable\": false, \"orderable\": false, \"visible\": false,sClass: \"alignCenter\" },\r\n                    ],\r\n                    scrollY: '47vh',\r\n                    scrollCollapse: true,\r\n                    \"paging\": true,           // Enable pagination\r\n                    \"pageLength\": 50, \r\n                    \"lengthChange\": true,\r\n                    \"lengthMenu\": [50, 100, 250, 500], // Page length options \r\n                    //dom: '<\"toolbar\">frtip',\r\n                    dom: '<\"row\"<\"col-sm-12 col-md-12\"<\"toolbar\">>><\"row\"<\"col-sm-12 col-md-6\"f>>' +\r\n                    '<\"row\"<\"col-sm-12\"tr>>' +\r\n                    '<\"row\"<\"col-sm-4 col-md-4\"l><\"col-sm-4 col-md-4\"i><\"col-sm-4 col-md-4\"p>>',\r\n                    initComplete: function( settings ) {\r\n                        var table = \$('#customers_statement_table').DataTable();\r\n                        \$(\"#customers_statement_table tbody tr:first\").addClass('selected');\r\n                        \r\n                        var customers_option = '<option value=\"0\" title=\"All Clients\">Select Clients</option>';\r\n                        for(var i=0;i<all_customers.length;i++){\r\n                            var selected = \"\";\r\n                            if(current_customer_id==all_customers[i].id){\r\n                                selected = \"selected\";\r\n                            }\r\n                            customers_option+='<option '+selected+' value='+all_customers[i].id+' title=\"'+all_customers[i].name+'\">'+all_customers[i].name+'</option>';\r\n                        }\r\n                        \r\n                        \$(\"div.toolbar\").html('<h3><i class=\"icon-payment\"></i>&nbsp;Show Statement</h3>\\n\\\r\n                         <div class=\"row\">\\n\\\r\n                            <div class=\"col-lg-4 col-md-4 col-sm-4\" >\\n\\\r\n                                <div class=\"col-lg-8 col-md-8 col-sm-12 pl2 pr2\" >\\n\\\r\n                                    <select id=\"customers_list\" style=\"width:100%\" class=\"form-control\" onchange=\"customer_changed()\">\\n\\\r\n                                    </select>\\n\\\r\n                                </div>\\n\\\r\n                                <div class=\"col-lg-4 col-md-4 col-sm-12 pl2 pr2\" >\\n\\\r\n                                    <div class=\"btn-group\" role=\"group\" aria-label=\"\">\\n\\\r\n                                        <button style=\"display:none\" id=\"payment_id\" onclick=\"addPayment()\" type=\"button\" class=\"btn btn-md btn-info \" >Add Payment</button>\\n\\\r\n                                    </div>\\n\\\r\n                                </div>\\n\\\r\n                            </div>\\n\\\r\n                            <div class=\"col-lg-6 col-md-6 col-sm-6\">\\n\\\r\n                                <div class=\"input-group\" style=\"width:100%\">\\n\\\r\n                                    <input type=\"text\" id=\"pdatepicker\" class=\"form-control\" placeholder=\"\">\\n\\\r\n                                    <span class=\"input-group-btn\">\\n\\\r\n                                        <button disabled=\"disabled\" id=\"pdatepickerbtn\" class=\"btn btn-primary\" type=\"button\"  onclick=\"prepare_print_customer_statement_(1)\">Statement of Account</button>\\n\\\r\n                                        <button disabled=\"disabled\" id=\"pdatepickerbtn_d\" class=\"btn btn-primary\" type=\"button\"  onclick=\"prepare_print_customer_statement(1)\">Detailed Statement</button>\\n\\\r\n                                    </span>\\n\\\r\n                                </div>\\n\\\r\n                            </div>\\n\\\r\n                            <div class=\"col-lg-2 col-md-2 col-sm-2\" >\\n\\\r\n                                <div class=\"btn-group\" role=\"group\" aria-label=\"\" style=\"width:100%\">\\n\\\r\n                                    <div class=\"btn-group\" id=\"buttons\" style=\"float:right\"></div>\\n\\\r\n                                </div>\\n\\\r\n                            </div>\\n\\\r\n                        </div>\\n\\\r\n                        ');\r\n                                \r\n                        \$('.selectpicker').selectpicker();\r\n                        \r\n                        \r\n                        var buttons = new \$.fn.dataTable.Buttons(table, {\r\n                            buttons: [\r\n                              {\r\n                                    extend: 'excel',\r\n                                    text: 'Export excel',\r\n                                    className: 'exportExcel',\r\n                                    filename: 'Statement',\r\n                                    customize: _customizeExcelOptions,\r\n                                    exportOptions: {\r\n                                        modifier: {\r\n                                            page: 'all'\r\n                                        },\r\n                                        columns: [ 0,1,2,3,4,5,6,7 ]\r\n                                        //format: {\r\n                                            //body: function ( data, row, column, node ) {\r\n                                                // Strip \$ from salary column to make it numeric\r\n                                                ///return column === 6 ? data.replace( /[L.L.,]/g, '' ) : data;\r\n                                            //}\r\n                                        //}\r\n                                    }\r\n                              }\r\n                            ]\r\n                            \r\n                       }).container().appendTo(\$('#buttons'));\r\n                       \r\n                       function _customizeExcelOptions(xlsx) {\r\n                           var sheet = xlsx.xl.worksheets['sheet1.xml'];\r\n                            var clR = \$('row', sheet);\r\n                            //var r1 = Addrow(clR.length+2, [{key:'A',value: \"Total Credit Notes\"},{key:'B',value: total}]);\r\n                            //sheet.childNodes[0].childNodes[1].innerHTML = sheet.childNodes[0].childNodes[1].innerHTML + r1;\r\n                            \r\n                            //\$('row c[r^=\"A'+(clR.length+2)+'\"]', sheet).attr('s', '48');\r\n                            \r\n                            function Addrow(index, data) {\r\n                                var msg = '<row r=\"' + index + '\">'\r\n                                for (var i = 0; i < data.length; i++) {\r\n                                    var key = data[i].key;\r\n                                    var value = data[i].value;\r\n                                    msg += '<c t=\"inlineStr\" r=\"' + key + index + '\">';\r\n                                    msg += '<is>';\r\n                                    msg += '<t>' + value + '</t>';\r\n                                    msg += '</is>';\r\n                                    msg += '</c>';\r\n                                }\r\n                                msg += '</row>';\r\n                                return msg;\r\n                            }\r\n                       }\r\n    \r\n                        //if(table.rows().count()==0)\r\n                            //\$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\r\n                        \r\n                        \r\n                        \$('[data-toggle=confirmation]').confirmation({\r\n                            rootSelector: '[data-toggle=confirmation]',\r\n                            placement: 'right',\r\n                            onConfirm: function() {\r\n                                var dt = \$('#customers_statement_table').DataTable();\r\n                                var id = dt.rows({ selected: true }).data()[0][0];\r\n                                \$.getJSON(\"?r=suppliers&f=delete_suppliers&p0=\"+parseInt(id.split('-')[1]) , function (data) {\r\n                                    if(!data.status){\r\n                                        swal(\"Unable to delete!\", \"Please contact system administrator\", \"warning\");\r\n                                    }else{\r\n                                        dt.row('.selected').remove().draw( false );\r\n                                        \$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\r\n                                        swal(\"\", \"Supplier has been deleted.\", \"success\");\r\n                                    }\r\n\r\n                                }).done(function () {\r\n                                    \r\n                                });\r\n                            },\r\n                            onCancel: function() {\r\n                                \r\n                            },\r\n                            // other options\r\n                        });\r\n                        \r\n                        \r\n                        var defaultStart = moment().startOf('month');\r\n                        var end = moment();\r\n                        \r\n                        \$('#pdatepicker').daterangepicker({\r\n                            //dateLimit:{month:12},\r\n                            startDate: defaultStart,\r\n                            endDate: end,\r\n                            locale: {\r\n                                format: 'YYYY-MM-DD'\r\n                            },\r\n                            ranges: {\r\n                                'Today': [moment(), moment()],\r\n                                'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],\r\n                                'Last 7 Days': [moment().subtract(6, 'days'), moment()],\r\n                                'Last 30 Days': [moment().subtract(29, 'days'), moment()],\r\n                                'This Month': [moment().startOf('month'), moment().endOf('month')],\r\n                                'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]\r\n                             }\r\n                        });\r\n                        \r\n                        \r\n                        \$(\"#customers_list\").select2({\r\n                            ajax: {\r\n                                url: '?r=customers&f=search',\r\n                                data: function (params) {\r\n                                    var query = {\r\n                                        p0: params.term || \"\",\r\n                                        p1: params.page || 1\r\n                                    }\r\n\r\n                                    // Query parameters will be ?search=[term]&type=public\r\n                                    return query;\r\n                                },\r\n                                delay: 250,\r\n                                dataType: 'json'\r\n                            },\r\n                            placeholder: \"Search Client\",\r\n                            dropdownParent: \$(\"body\"), allowClear: true\r\n                        });\r\n                       \r\n                        \$(\".sk-circle-layer\").hide();\r\n                        \r\n                        \r\n                       \r\n                            \r\n                    },\r\n                    fnDrawCallback: updateRows,\r\n                    fnRowCallback: function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {\r\n                        \$(nRow).addClass(aData[2]);\r\n                    },\r\n                });\r\n                \r\n                \$('#customers_statement_table').on( 'page.dt', function () {\r\n                    //var table = \$('#customers_statement_table').DataTable();\r\n                    //table.row(':eq(0)', { page: 'current' }).select();\r\n                    //\$(\"#customers_statement_table .row:first\").addClass(\"selected\");\r\n                    \$(\".selected\").removeClass(\"selected\");\r\n                    //\$(\".tab_toolbar button.blueB\").addClass(\"disabled\");\r\n                } );\r\n                \r\n                \$('#customers_statement_table').DataTable().columns().every( function () {\r\n                    var that = this;\r\n                    \$( 'input', this.footer() ).on( 'keyup change', function () {\r\n                        if ( that.search() !== this.value ) {\r\n                            that.search( this.value ).draw();\r\n                        }\r\n                    } );\r\n                } );\r\n                \r\n                \r\n                \$('#customers_statement_table').DataTable().on('mousedown',\"tr\", function ( e, dt, type, indexes ) { \r\n                    \$('.selected').removeClass(\"selected\");\r\n                    \$(this).addClass('selected');\r\n                    \$(\"#tab_toolbar button.blueB\").removeClass(\"disabled\");\r\n                });\r\n                \r\n                \$('#customers_statement_table').on('click', 'td', function () {\r\n                    if (\$(this).index() == 10 ) {\r\n                        //alert(\"fdsfs\");\r\n                        return false;\r\n                    }\r\n               });\r\n            }\r\n            \r\n            function prepare_print_customer_statement(full){\r\n                printing_customer_statement_date_range(\$(\"#customers_list\").val(),\$(\"#pdatepicker\").val());\r\n                //printing_customer_statement(\$(\"#customers_list\").val());\r\n            }\r\n            \r\n            function prepare_print_customer_statement_(full){\r\n                printing_customer_statement_date_range__(\$(\"#customers_list\").val(),\$(\"#pdatepicker\").val());\r\n                //printing_customer_statement(\$(\"#customers_list\").val());\r\n            }\r\n            \r\n            \r\n            function edit_customer_payment(id){\r\n                \$(\".sk-circle\").center();\r\n                \$(\".sk-circle-layer\").show();\r\n                var _data = [];\r\n                \$.getJSON(\"?r=customers&f=getPaymentDetails&p0=\"+id, function (data) {\r\n                    _data = data;\r\n                }).done(function () {\r\n                    addCustomerPaymentDetails(\$(\"#customers_list\").val(),id,_data,\"customer_statement\");\r\n                });\r\n            }\r\n            \r\n            function updateRows(){\r\n                var table = \$('#customers_statement_table').DataTable();\r\n                var p = table.rows({ page: 'current' }).nodes();\r\n                var dlt = '';\r\n                for (var k = 0; k < p.length; k++){\r\n                    var index = table.row(p[k]).index();\r\n                    if(table.cell(index, 8).data()==0 && table.cell(index, 1).data()==\"\"){\r\n                        if(table.cell(index, 2).data().indexOf(\"CLPAY\") !== -1){\r\n                            \r\n                            if(denieaccess==0){\r\n                                dlt='&nbsp;&nbsp;<i class=\"glyphicon glyphicon glyphicon-trash trash_icon trash_icon_color\" onclick=\"delete_customer_payment(\\''+parseInt(table.cell(index, 2).data().split(\"-\")[1])+'\\')\"></i>';\r\n                            }\r\n                            \r\n                            table.cell(index, 9).data('<i class=\"glyphicon glyphicon glyphicon-edit trash_icon\" onclick=\"edit_customer_payment(\\''+parseInt(table.cell(index, 2).data().split(\"-\")[1])+'\\')\"></i>&nbsp;&nbsp;<i class=\"glyphicon glyphicon glyphicon-print trash_icon\" onclick=\"print_payment_receipt_customer_payment(\\''+parseInt(table.cell(index, 2).data().split(\"-\")[1])+'\\')\"></i>'+dlt);\r\n\r\n                        }\r\n\r\n                    }\r\n                    //if(table.cell(index, 1).data().length>0){\r\n                        //table.cell(index, 10).data('&nbsp;<button onclick=\"show_details_invoice(\\''+parseInt(table.cell(index, 1).data().split(\"-\")[1])+'\\')\" type=\"button\" class=\"btn btn-xs btn-info btn-xss\">Details</button>');\r\n                    //}\r\n                }\r\n            }\r\n            \r\n            \r\n            \r\n            function addPayment(){\r\n                \$(\".sk-circle\").center();\r\n                \$(\".sk-circle-layer\").show();\r\n                addCustomerPaymentDetails(\$(\"#customers_list\").val(),0,[],\"customer_statement\");\r\n                /*\r\n                var payment_options = \"\";\r\n                \$.getJSON(\"?r=settings_info&f=get_payment_method\", function (data) {\r\n                    \$.each(data, function (key, val) {\r\n                        payment_options+=\"<option value='\"+val.id+\"' title='\"+val.method_name+\"'>\"+val.method_name+\"</option>\";\r\n                    });\r\n                }).done(function () {\r\n                    var content =\r\n                        '<div class=\"modal fade\" id=\"addPaymentModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"payment_info__\" aria-hidden=\"true\">\\n\\\r\n                        <div class=\"modal-dialog\" role=\"document\">\\n\\\r\n                            <div class=\"modal-content\">\\n\\\r\n                                <div class=\"modal-header\"> \\n\\\r\n                                    <h3 class=\"modal-title\"><i class=\"icon-invoice\"></i>&nbsp;Add payment<i style=\"float:right;font-size:30px; cursor:pointer\" class=\"glyphicon glyphicon-remove\" onclick=\"closeModal(\\'addPaymentModal\\')\"></i></h3>\\n\\\r\n                                </div>\\n\\\r\n                                <div class=\"modal-body\">\\n\\\r\n                                    <div class=\"row\">\\n\\\r\n                                        <div class=\"col-lg-4 col-md-4 col-sm-12 col-xs-12\">\\n\\\r\n                                            <div class=\"form-group\">\\n\\\r\n                                                <label for=\"payment_method\">Value</label>\\n\\\r\n                                                <input id=\"payment_value\" value=\"0\" name=\"payment_value\" type=\"text\" class=\"form-control only_numeric\"/>\\n\\\r\n                                            </div>\\n\\\r\n                                        </div>\\n\\\r\n                                        <div class=\"col-lg-4 col-md-4 col-sm-4 col-xs-12\">\\n\\\r\n                                            <div class=\"form-group\">\\n\\\r\n                                                <label for=\"payment_method\">Payment Method</label>\\n\\\r\n                                                <select id=\"payment_method\" name=\"payment_method\" class=\"selectpicker form-control\" >'+payment_options+'</select>\\n\\\r\n                                            </div>\\n\\\r\n                                        </div>\\n\\\r\n                                        <div class=\"col-lg-4 col-md-4 col-sm-12 col-xs-12\">\\n\\\r\n                                            <div class=\"form-group\">\\n\\\r\n                                                <label for=\"payme\">&nbsp;</label>\\n\\\r\n                                                <button id=\"payme\" onclick=\"addPaymentToCustomer('+parseInt(\$(\"#customers_list\").val())+')\" style=\"font-size:16px; width:100%\" id=\"add_payment_btn\" type=\"button\" class=\"btn btn-default\">Add payment</button>\\n\\\r\n                                            </div>\\n\\\r\n                                        </div>\\n\\\r\n                                    </div>\\n\\\r\n                                </div>\\n\\\r\n                                <div class=\"modal-footer\">\\n\\\r\n                                </div>\\n\\\r\n                            </div>\\n\\\r\n                        </div>\\n\\\r\n                    </div>';\r\n                    \$(\"#addPaymentModal\").remove();\r\n                    \$(\"body\").append(content);\r\n                    \r\n                    \$(\".only_numeric\").numeric({negative:true});\r\n                    \r\n                    \$(\".only_numeric\").attr(\"autocomplete\", \"off\");\r\n                    \$(\"#addPaymentModal\").centerWH();\r\n                    \$('.selectpicker').selectpicker();\r\n                    \$('#addPaymentModal').modal('toggle');\r\n\r\n                    \$('#addPaymentModal').on('hidden.bs.modal', function (e) {\r\n                        \$('#addPaymentModal').remove();\r\n                    });\r\n                });\r\n                */\r\n            }\r\n            \r\n            function addPaymentToCustomer(customer_id){\r\n                \$(\".sk-circle-layer\").show();\r\n                \$(\"#add_payment_btn\").attr(\"disabled\",\"disabled\");\r\n                \$.getJSON(\"?r=invoice&f=addCustomerPaymentDetails&p0=\" + customer_id +\"&p1=\"+\$(\"#payment_value\").val()+\"&p2=\"+\$(\"#payment_method\").val(), function (data) {\r\n\r\n                }).done(function () {\r\n                    \$('#addPaymentModal').modal('toggle');\r\n                    //\$('[data-toggle=\"popover\"]').remove();\r\n                    var table = \$('#customers_statement_table').DataTable();\r\n                    table.ajax.url(\"?r=customers&f=get_customer_statement&p0=\"+\$(\"#customers_list\").val()).load(function () {\r\n                        table.page('last').draw(false);\r\n                        table.row(':last', {page: 'current'}).select();\r\n                        \$(\".dataTables_scrollBody\").scrollTop(\$('.dataTables_scrollBody')[0].scrollHeight);\r\n                        \$(\".sk-circle-layer\").hide();\r\n                    }, false);\r\n                });\r\n                \r\n            }\r\n            \r\n            function delete_customer_payment(pay_id){\r\n                swal({\r\n                    title: \"Are you sure?\",\r\n                    text: \"\",\r\n                    type: \"warning\",\r\n                    showCancelButton: true,\r\n                    confirmButtonClass: \"btn-danger\",\r\n                    confirmButtonText: \"Yes, delete it!\",\r\n                    closeOnConfirm: true\r\n                },\r\n                function(isConfirm){\r\n                   if(isConfirm){\r\n                       var _data=[];\r\n                       \$.getJSON(\"?r=customers&f=delete_customer_payment&p0=\"+pay_id, function (data) {\r\n                           _data=data;\r\n                        }).done(function () {\r\n                            \r\n                            if(_data[0]==0){\r\n                                \$.alert({\r\n                                    title: 'Alert!',\r\n                                    content: 'Unable to delete client payment!',\r\n                                });\r\n                            }\r\n                            \r\n                            var table = \$('#customers_statement_table').DataTable();\r\n                            table.ajax.url(\"?r=customers&f=get_customer_statement&p0=\"+\$(\"#customers_list\").val()).load(function () {\r\n                                //table.row('.' + PadSUPPAY(pay_id), {page: 'last'}).select();\r\n                            },false);\r\n                            \r\n                            \r\n                            \r\n                        });\r\n                   }\r\n                }); \r\n            }\r\n            \r\n            function addSupplier_s(source){\r\n              \r\n                addSupplier(source);\r\n             \r\n            }\r\n           \r\n            function showDetails_s(){\r\n                \r\n                if(\$(\".tab_toolbar button.blueB\").hasClass(\"disabled\")==false){  \r\n                    var dt = \$('#customers_statement_table').DataTable();\r\n                    var id = dt.rows({ selected: true }).data()[0][0];\r\n                    showDetails(id);\r\n                }\r\n               \r\n            }\r\n            \r\n            function edit_s(){\r\n               \r\n                if(\$(\".tab_toolbar button.blueB\").hasClass(\"disabled\")==false){    \r\n                    var dt = \$('#customers_statement_table').DataTable();\r\n                    var id = dt.rows({ selected: true }).data()[0][0];\r\n                    editSupplier(id);\r\n                }\r\n               \r\n            }\r\n            \r\n            function delete_s(){\r\n               \r\n                var dt = \$('#customers_statement_table').DataTable();\r\n                var id = dt.rows({ selected: true }).data()[0][0];\r\n               \r\n            }\r\n            \r\n            \t\r\n        </script>\r\n    </head>\r\n    <body>\r\n        \r\n        <!-- Navbar fixed top -->\r\n        ";
include "application/mvc/views/topMenu.php";
echo "        <div class=\"container\">\r\n            <div class=\"panel panel-default\">\r\n                <div class=\"panel-body\" style=\"margin-top: 50px;\">\r\n                    <div class=\"row\"  >\r\n                        <div class=\"col-lg-12\" >           \r\n                            <table id=\"customers_statement_table\" class=\"table table-striped table-bordered\" cellspacing=\"0\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th style=\"width: 120px;\">Date</th>\r\n                                        <th style=\"width: 90px;\">Ref. Invoice</th>\r\n                                        <th style=\"width: 90px;\">Ref. Payment</th>\r\n                                        <th>Note</th>\r\n                                        <th style=\"width: 100px;\">Charges</th>\r\n                                        <th style=\"width: 100px;\">Payment Value</th>\r\n                                        <th style=\"width: 80px;\">P. Method</th>\r\n                                        <th style=\"width: 100px;\">Remain</th>\r\n                                        <th style=\"width: 80px;\">Deleted flag</th>\r\n                                        <th style=\"width: 70px;\"></th>\r\n                                        <th style=\"width: 20px;\"></th>\r\n                                        <th style=\"width: 20px;\"></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tfoot>\r\n                                    <tr>\r\n                                        <th>Date</th>\r\n                                        <th>Ref. Invoice</th>\r\n                                        <th>Ref. Payment</th>\r\n                                        <th>Note</th>\r\n                                        <th>Charges</th>\r\n                                        <th>Payment Value</th>\r\n                                        <th>Payment Method</th>\r\n                                        <th>Remain</th>\r\n                                        <th>Deleted flag</th>\r\n                                        <th></th>\r\n                                        <th></th>\r\n                                        <th></th>\r\n                                    </tr>\r\n                                </tfoot>\r\n                                <tbody></tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"sk-circle-layer\">\r\n            <div class=\"sk-circle\">\r\n                <div class=\"sk-circle1 sk-child\"></div>\r\n                <div class=\"sk-circle2 sk-child\"></div>\r\n                <div class=\"sk-circle3 sk-child\"></div>\r\n                <div class=\"sk-circle4 sk-child\"></div>\r\n                <div class=\"sk-circle5 sk-child\"></div>\r\n                <div class=\"sk-circle6 sk-child\"></div>\r\n                <div class=\"sk-circle7 sk-child\"></div>\r\n                <div class=\"sk-circle8 sk-child\"></div>\r\n                <div class=\"sk-circle9 sk-child\"></div>\r\n                <div class=\"sk-circle10 sk-child\"></div>\r\n                <div class=\"sk-circle11 sk-child\"></div>\r\n                <div class=\"sk-circle12 sk-child\"></div>\r\n            </div>\r\n        </div>\r\n    </body>\r\n</html>\r\n\r\n";

?>