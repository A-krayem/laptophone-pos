<?php
/*
 * @ https://EasyToYou.eu - IonCube v11 Decoder Online
 * @ PHP 5.6
 * @ Decoder version: 1.0.4
 * @ Release: 02/06/2020
 *
 * @ ZendGuard Decoder PHP 5.6
 */

// Decoded file for php version 53.
echo "<!DOCTYPE html>\n<!--\nTo change this license header, choose License Headers in Project Properties.\nTo change this template file, choose Tools | Templates\nand open the template in the editor.\n-->\n<html>\n    <head>\n        <title>";
echo $_SESSION["page_title"];
echo " Sales per day</title>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <link rel=\"icon\" type=\"image/png\" href=\"resources/favicon.png\">\n        \n        <script src=\"libraries/jquery-3.1.1.min.js\" type=\"text/javascript\"></script>\n\n        <script src=\"libraries/bootstrap-3.3.7-dist/js/bootstrap.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-3.3.7-dist/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/jquery.dataTables.min.js\" type=\"text/javascript\"></script>\n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/js/dataTables.bootstrap.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-plugins/DataTables-1.10.13/media/css/dataTables.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n\n        \n        <link href=\"libraries/bootstrap-plugins/export/buttons.dataTables.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        <script src=\"libraries/bootstrap-plugins/export/dataTables.buttons.min.js\" type=\"text/javascript\"></script>\n        <script src=\"libraries/bootstrap-plugins/export/jszip.min.js\" type=\"text/javascript\"></script>\n        <script src=\"libraries/bootstrap-plugins/export/vfs_fonts.js\" type=\"text/javascript\"></script>\n        <script src=\"libraries/bootstrap-plugins/export/buttons.html5.min.js\" type=\"text/javascript\"></script>\n        \n        <script src=\"libraries/bootstrap-plugins/DataTables-1.10.13/extensions/Select/js/dataTables.select.min.js\" type=\"text/javascript\"></script>\n        <!-- <script src=\"libraries/bootstrap-plugins/Buttons-1.2.4/js/dataTables.buttons.min.js\" type=\"text/javascript\"></script>-->\n        <script src=\"libraries/bootstrap-plugins/Buttons-1.2.4/js/buttons.bootstrap.min.js\" type=\"text/javascript\"></script> \n        <link href=\"libraries/bootstrap-plugins/Buttons-1.2.4/css/buttons.bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        \n        <link href=\"libraries/bootstrap-plugins/datepicker-master/dist/css/bootstrap-datepicker.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        <script src=\"libraries/bootstrap-plugins/datepicker-master/dist/js/bootstrap-datepicker.min.js\" type=\"text/javascript\"></script>\n        \n        \n        <!-- Include Date Range Picker -->\n        <script src=\"libraries/bootstrap-plugins/daterangepicker-master/moment.min.js\" type=\"text/javascript\"></script>\n        <script src=\"libraries/bootstrap-plugins/daterangepicker-master/daterangepicker.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-plugins/daterangepicker-master/daterangepicker.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        \n        \n        \n        <script src=\"application/mvc/views/custom_libraries/javascripts/global_functions.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\n        <script src=\"application/mvc/views/custom_libraries/javascripts/global.js?rnd=";
echo self::generateRandomStringComplex();
echo "\" type=\"text/javascript\"></script>\n\n        <script src=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/js/bootstrap-select.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/css/bootstrap-select.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        <link href=\"application/mvc/views/custom_libraries/css/global.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\n        \n         <script src=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/js/bootstrap-select.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-plugins/bootstrap-select-master/bootstrap-select-master/dist/css/bootstrap-select.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n        \n        <script src=\"libraries/numeric.js\" type=\"text/javascript\"></script>\n        \n        <script src=\"libraries/bootstrap-plugins/libs/bootstrap-confirmation.min.js\" type=\"text/javascript\"></script>\n        \n        <script src=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.min.js\" type=\"text/javascript\"></script>\n        <link href=\"libraries/bootstrap-plugins/bootstrap-sweetalert-master/dist/sweetalert.css\" rel=\"stylesheet\" type=\"text/css\"/>\n       \n        <link href=\"application/mvc/views/custom_libraries/svgs/font/style.css?rnd=";
echo self::generateRandomStringComplex();
echo "\" rel=\"stylesheet\" type=\"text/css\"/>\n\n       \n        \n        <style type=\"text/css\">\n            \n\n            .container,.panel {\n                height:100%;\n                width: 100%;\n                padding: 0px !important;\n                margin: 0px !important;\n            }\n            \n\n            \n            .table>tfoot>tr>th{\n                font-size: 12px !important;\n                background-color: #F3F3F3;\n                padding: 2px;\n                border: none !important;\n            }\n            \n            .dataTables_filter{ display: none; }\n            \n            .input-sm{\n                height: 25px !important;\n                font-size: 14px !important;\n            }\n            \n            .selected{\n                background-color: #337ab7 !important;\n                color: #ffffff !important;\n            }\n            \n            .search_filter{\n                width: 100% !important;\n                color: #000;\n            }\n            \n            \n            ::-webkit-input-placeholder { /* Chrome/Opera/Safari */\n                color: #337ab7;\n                opacity: 0.9;\n            }\n            ::-moz-placeholder { /* Firefox 19+ */\n                color: #337ab7;\n                opacity: 0.9;\n            }\n            :-ms-input-placeholder { /* IE 10+ */\n                color: #337ab7;\n                opacity: 0.9;\n            }\n            :-moz-placeholder { /* Firefox 18- */\n                color: #337ab7;\n                opacity: 0.9;\n            }\n            \n            /* enable absolute positioning */\n            .inner-addon { \n                position: relative; \n            }\n\n            /* style icon */\n            .inner-addon .glyphicon {\n              position: absolute;\n              padding: 6px;\n              padding-top: 8px;\n              pointer-events: none;\n            }\n\n            /* align icon */\n            .left-addon .glyphicon  { left:  0px;}\n            .right-addon .glyphicon { right: 0px;}\n\n            /* add padding  */\n            .left-addon input  { padding-left:  2px; }\n            .right-addon input { padding-right: 30px; }\n            \n            .phone-input{\n                    margin-bottom:8px;\n            }\n            \n            .confirmation {\n                width: 160px;\n            }\n            \n            .list-group-item{\n                border: none !important;\n            }\n            \n            div.toolbar h3{\n                margin-top: 0px !important;\n            }\n            \n            #add_new_expenses input{\n                font-size: 16px !important;\n            }\n            \n            .table-nonfluid {\n                width: auto !important;\n             }\n             \n             \n             \n             .well{\n                 min-height: 15px;\n                 padding: 0px;\n                 margin-bottom: 0px;\n                 margin-top: 5px;\n                 text-align: center;\n                 background-color: transparent;\n                 border: none;\n                 box-shadow: none;\n             }\n             \n             .boxInfo{\n                 color: #fff;\n                 border-radius: 5px;\n                 padding-top: 1px;\n                 padding-bottom: 1px;\n                 font-size: 13px;\n                 padding-left: 5px !important;\n                 padding-right: 5px !important;\n             }\n             \n            .boxInfoProfit{\n                 background-color: #337ab7;\n             }\n             \n             .boxInfoExpenses{\n                 background-color: #ac2925;\n             }\n             \n             .boxInfoCont{\n                 \n             }\n             \n             .stk{\n                 font-size: 13px;\n                 font-weight: bold;\n             }\n             .stk_na{\n                 font-size: 13px;\n                 color: #ac2925;\n                 font-weight: bold;\n             }\n             \n            .hilighted_row{\n                background-color: ";
echo $data["row_discounted_color_in_report"];
echo " !important;\n            }\n            \n            .costinp{\n                width:80px;\n                height:20px;\n                color:#000\n            }\n            \n            \n            .panel > .panel-heading{\n                 padding: 1px 6px  !important;\n            }\n            \n            \n            small{\n                font-size: 12px !important;\n            }\n            \n            \n        </style>\n\n        <script type=\"text/javascript\">\n            var report__by_day = null;\n            \n            var current_store_id = ";
echo $_SESSION["store_id"];
echo ";\n            var current_supplier_id = null;\n            var current_category_item = 0;\n            var report_sales_hide_colums = [];\n            \n            var stores = [];\n            var suppliers = [];\n            var categories_items = [];\n            var categories_parents = [];\n            \n            var current_date = \"today\";\n            \n            \n            var currency = \"";
echo $data["currency"];
echo "\";\n            \n            var  ptype_hide = \";display:block;\";\n            ";
if ($_SESSION["ptype"] == 1) {
    echo "                ptype_hide = \";display:none;\";\n            ";
}
echo "                \n            function check_if_col_hide(id){\n                for(var i=0;i<report_sales_hide_colums.length;i++){\n                    if(report_sales_hide_colums[i]==id){\n                        return false;\n                    }\n                }\n                return true;\n            }\n            \n            function update_cost(object,id){\n                \$.getJSON(\"?r=invoice&f=update_cost&p0=\"+id+\"&p1=\"+\$(object).val().replace(/,/g, ''), function (data) {\n                    \n                }).done(function () {\n                    \n                });\n            }\n           \n            \$(document).ready(function () {\n         \n                \$(\".sk-circle\").center();\n                \$(\".sk-circle-layer\").show();\n                \n                \$.getJSON(\"?r=items&f=get_optimized_needed_data\", function (data) {\n                    \n                    \$.each(data.suppliers, function (key, val) {\n                        if(current_supplier_id==null){\n                            current_supplier_id = 0;\n                        }\n                        suppliers.push({id:val.id,name:val.name});\n                    });\n                    \n                    \$.each(data.categories, function (key, val) {\n                        categories_items.push({id:val.id,name:val.description,parent:val.parent});\n                    });\n                    \n                    \$.each(data.parents_categories, function (key, val) {\n                        categories_parents.push({id:val.id,name:val.name});\n                    });\n                    \n                    report_sales_hide_colums = data.report_sales_hide_colums.split(',');\n                }).done(function () {\n                    init();\n                });\n            });\n            \n            function parent_categories_changed(){\n                var options_tmp = '<option value=\"0\" title=\"All Sub-Categories\">All Sub-Categories</option>';\n                for(var i=0;i<categories_items.length;i++){\n                    if(categories_items[i].parent==\$(\"#parent_categories_id\").val()){\n                        options_tmp+='<option value=\"'+categories_items[i].id+'\" title=\"'+categories_items[i].name+'\">'+categories_items[i].name+'</option>';\n                    }\n                }\n                \$(\"#categories_list\").empty();\n                \$(\"#categories_list\").append(options_tmp);\n                \$(\"#categories_list\").selectpicker(\"refresh\");\n                current_category_item = 0;\n                update_data();\n            }\n            \n            function init(){\n                \$('#items_table').show();\n                \n                \$(\".sk-circle\").center();\n                \$(\".sk-circle-layer\").show();\n                \n                var search_fields = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];\n                var index = 0;\n                \$('#report__by_day tfoot th').each( function () {\n                    if(jQuery.inArray(index, search_fields) !== -1){\n                        var title = \$(this).text();\n                        \$(this).html( '<div class=\"inner-addon left-addon\"><input style=\"width: 100% !important;\" class=\"form-control input_sm_search\" type=\"text\" placeholder=\" '+title+'\" /></div>' );\n                        index++;\n                    }\n                });\n                \n                \n                jQuery.extend( jQuery.fn.dataTableExt.oSort, {\n                    \"currency-pre\": function ( a ) {\n                        a = (a===\"-\") ? 0 : a.replace( /[^\\d\\-\\.]/g, \"\" );\n                        return parseFloat( a );\n                    },\n\n                    \"currency-asc\": function ( a, b ) {\n                        return a - b;\n                    },\n\n                    \"currency-desc\": function ( a, b ) {\n                        return b - a;\n                    }\n                } );\n\n                report__by_day = \$('#report__by_day').dataTable({\n                    ajax: \"?r=reports&f=getReportByDay&p0=\"+\$(\"#suppliers_list\").val()+\"&p1=today&p2=\"+current_category_item+\"&p3=&p4=0&p5=0\",\n                    orderCellsTop: true,\n                    aoColumnDefs: [\n                        { \"targets\": [0], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(0) },\n                        { \"targets\": [1], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(1) },\n                        { \"targets\": [2], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(2) },\n                        { \"targets\": [3], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(3) },\n                        { \"targets\": [4], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(4) },\n                        { \"targets\": [5], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(5)},\n                        { \"targets\": [6], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(6),\"className\": \"dt-center\" },\n                        { \"targets\": [7], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(7)},\n                        { \"targets\": [8], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(8) },\n                        { \"targets\": [9], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(9) },\n                        { \"targets\": [10], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(10) },\n                        { \"targets\": [11], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(11) },\n                        { \"targets\": [12], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(12) },\n                        { \"targets\": [13], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(13) },\n                        { \"targets\": [14], \"searchable\": true, \"orderable\": true, \"visible\": check_if_col_hide(13) },\n                    ],\n                    scrollY: '47vh',\n                    scrollCollapse: true,\n                    \"paging\": true,           // Enable pagination\n                    \"pageLength\": 50, \n                    \"lengthChange\": true,\n                    \"lengthMenu\": [50, 100, 250, 500], // Page length options \n                    //dom: '<\"toolbar\">frtlip',\n                    dom: '<\"row\"<\"col-sm-12 col-md-12\"<\"toolbar\">>><\"row\"<\"col-sm-12 col-md-6\"f>>' +\n                    '<\"row\"<\"col-sm-12\"tr>>' +\n                    '<\"row\"<\"col-sm-4 col-md-4\"l><\"col-sm-4 col-md-4\"i><\"col-sm-4 col-md-4\"p>>',\n                    initComplete: function( settings ) {\n\n                        var table = \$('#report__by_day').DataTable();\n                        table.row(':eq(0)', { page: 'current' }).select();\n                        \n                        var scategories_parents_option = '<option value=\"0\" title=\"All Categories\">All Categories</option>';\n                        for(var i=0;i<categories_parents.length;i++){\n                            scategories_parents_option+='<option value='+categories_parents[i].id+' title=\"'+categories_parents[i].name+'\">'+categories_parents[i].name+'</option>';\n                        }\n                        \n                        var suppliers_option = '<option value=\"0\" title=\"All suppliers\">All suppliers</option>';\n                        for(var i=0;i<suppliers.length;i++){\n                            suppliers_option+='<option value='+suppliers[i].id+' title=\"'+suppliers[i].name+'\">'+suppliers[i].name+'</option>';\n                        }\n                        \n                        var categories_option = '<option value=\"0\" title=\"All Sub-Categories\">All Sub-Categories</option>';\n                        for(var i=0;i<categories_items.length;i++){\n                            categories_option+='<option value='+categories_items[i].id+' title=\"'+categories_items[i].name+'\">'+categories_items[i].name+'</option>';\n                        }\n                        \n                        var suppliers_changed_option = '<option value=\"0\" title=\"All Suppliers\">All Suppliers</option>';\n                        for(var i=0;i<suppliers.length;i++){\n                            suppliers_changed_option+='<option value='+suppliers[i].id+' title=\"'+suppliers[i].name+'\">'+suppliers[i].name+'</option>';\n                        }\n                        \n                        \$(\"div.toolbar\").html('<h3><i class=\"glyphicon icon-profits\" style=\"font-size:26px;\"></i>&nbsp;Sales per days (Invoices)</h3>\\n\\\n                        <div class=\"row\">\\n\\\n                           <div class=\"col-lg-2 col-md-2 col-sm-2\" style=\"padding-left:15px;padding-right:5px;\">\\n\\\n                                <div class=\"btn-group\" role=\"group\" aria-label=\"\" style=\"width:100%\">\\n\\\n                                    <input id=\"salesDate\" class=\"form-control datepicker\" type=\"text\" placeholder=\"Select date\" style=\"cursor:pointer;width:100%;\" />\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-lg-2 col-md-2 col-sm-2\" style=\"padding-left:5px;padding-right:5px;\">\\n\\\n                                <div class=\"form-group\" style=\"width:100%\">\\n\\\n                                    <select data-width=\"100%\" data-size=\"12\" data-live-search=\"true\" onchange=\"update_data()\" id=\"suppliers_list\" class=\"btn-group selectpicker\">\\n\\\n                                        '+suppliers_changed_option+'\\n\\\n                                    </select>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-lg-2 col-md-2 col-sm-2\" style=\"padding-left:5px;padding-right:5px;\">\\n\\\n                                <div class=\"form-group\" style=\"width:100%\">\\n\\\n                                    <select data-width=\"100%\" data-size=\"12\" data-live-search=\"true\" onchange=\"parent_categories_changed()\" id=\"parent_categories_id\" class=\"btn-group selectpicker\">\\n\\\n                                        '+scategories_parents_option+'\\n\\\n                                    </select>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-lg-2 col-md-2 col-sm-2\" style=\"padding-left:5px;padding-right:5px;\">\\n\\\n                                <div class=\"form-group\" style=\"width:100%\">\\n\\\n                                    <select data-width=\"100%\" data-size=\"12\" id=\"categories_list\" data-live-search=\"true\" class=\"btn-group selectpicker\" onchange=\"categories_changed()\">\\n\\\n                                        '+categories_option+'\\n\\\n                                    </select>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-lg-1 col-md-1 col-sm-1\" style=\"padding-left:0px;padding-right:5px;\">\\n\\\n                                <div class=\"form-group\" style=\"width:100%\">\\n\\\n                                    <select data-width=\"100%\" id=\"sales_type\" data-live-search=\"true\" class=\"btn-group selectpicker\" onchange=\"categories_changed()\" >\\n\\\n                                        <option value=\"0\" title=\"All Sales\">All Sales</option>\\n\\\n                                        <option value=\"1\" title=\"Retails\">Retails</option>\\n\\\n                                        <option value=\"2\" title=\"Wholesale\">Wholesale</option>\\n\\\n                                    </select>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-lg-3 col-md-3 col-sm-3\" >\\n\\\n                                <div class=\"btn-group\" role=\"group\" aria-label=\"\" style=\"width:100%\">\\n\\\n                                    <div class=\"btn-group\" id=\"buttons\" style=\"float:right\"></div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                        </div>\\n\\\n                        <div class=\"row\" style=\"margin-top:5px;\">\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-info\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_sales\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Total Cash</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-info\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_sales_creditcard\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Total Credit Cards</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-info\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_sales_debts\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Total Debts</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-info\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_sales_cheques\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Total Cheque(s)</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-info\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_sales_total\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Total Sales(s)</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;\">\\n\\\n                                <div class=\"panel panel-success\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_profit\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Total Profit</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            \\n\\\n                        </div>\\n\\\n                        <div class=\"row\" style=\"margin-top:5px;\">\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-danger\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_wasting\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Total Wasting</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-danger\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"tm_discount\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Manual Discount</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-danger\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"tm_discount_pl\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Manual Discount P&L</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-danger\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_expenses\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Total Expenses</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;padding-right:2px;\">\\n\\\n                                <div class=\"panel panel-danger\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_credit_notes\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Total Credit Notes</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                            <div class=\"col-md-2 col-sm-3\" style=\"padding-left:2px;\">\\n\\\n                                <div class=\"panel panel-success\">\\n\\\n                                    <div class=\"panel-heading\">\\n\\\n                                        <div class=\"row\">\\n\\\n                                            <div class=\"col-xs-12 col-sm-12 text-left\">\\n\\\n                                                <b class=\"announcement-heading dollar\" id=\"total_net_profit\">0</b>\\n\\\n                                                <p class=\"announcement-text\" style=\"margin-bottom:0px;\">Net Profit</p>\\n\\\n                                            </div>\\n\\\n                                        </div>\\n\\\n                                    </div>\\n\\\n                                </div>\\n\\\n                            </div>\\n\\\n                        </div>\\n\\\n                        ');\n \n                        var buttons = new \$.fn.dataTable.Buttons(table, {\n                            buttons: [\n                              {\n                                    extend: 'excel',\n                                    text: 'Export excel',\n                                    className: 'exportExcel',\n                                    filename: 'Sales per days ',\n                                    customize: _customizeExcelOptions,\n                                    exportOptions: {\n                                        modifier: {\n                                            page: 'all'\n                                        },\n                                        //format: {\n                                            //body: function ( data, row, column, node ) {\n                                                // Strip \$ from salary column to make it numeric\n                                                ///return column === 6 ? data.replace( /[L.L.,]/g, '' ) : data;\n                                            //}\n                                        //}\n                                    }\n                              }\n                            ]\n                            \n                       }).container().appendTo(\$('#buttons'));\n                       \n                      function _customizeExcelOptions(xlsx) {\n                            var sheet = xlsx.xl.worksheets['sheet1.xml'];\n                            var clR = \$('row', sheet);\n                            var r1 = Addrow(clR.length+2, [{key:'A',value: \"Total Sales\"},{key:'B',value: \$(\"#total_sales_total\").html()}]);\n                            var r2 = Addrow(clR.length+3, [{key:'A',value: \"Total profit\"},{key:'B',value: \$(\"#total_profit\").html()}]);\n                            var r3 = Addrow(clR.length+4, [{key:'A',value: \"Total Expenses\"},{key:'B',value: \$(\"#total_expenses\").html()}]);\n                            var r4 = Addrow(clR.length+5, [{key:'A',value: \"Total Invoices Discounts\"},{key:'B',value: \$(\"#tm_discount\").html()}]);\n                            var r5 = Addrow(clR.length+6, [{key:'A',value: \"Total Credit Notes\"},{key:'B',value: \$(\"#total_credit_notes\").html()}]);\n                            sheet.childNodes[0].childNodes[1].innerHTML = sheet.childNodes[0].childNodes[1].innerHTML + r1+ r2+ r3+ r4 + r5;\n                            \n                            \$('row c[r^=\"A'+(clR.length+2)+'\"]', sheet).attr('s', '48');\n                            \$('row c[r^=\"A'+(clR.length+3)+'\"]', sheet).attr('s', '48');\n                            \$('row c[r^=\"A'+(clR.length+4)+'\"]', sheet).attr('s', '48');\n                            \$('row c[r^=\"A'+(clR.length+5)+'\"]', sheet).attr('s', '48');\n                            \$('row c[r^=\"A'+(clR.length+6)+'\"]', sheet).attr('s', '48');\n                            \n                            function Addrow(index, data) {\n                                var msg = '<row r=\"' + index + '\">'\n                                for (var i = 0; i < data.length; i++) {\n                                    var key = data[i].key;\n                                    var value = data[i].value;\n                                    msg += '<c t=\"inlineStr\" r=\"' + key + index + '\">';\n                                    msg += '<is>';\n                                    msg += '<t>' + value + '</t>';\n                                    msg += '</is>';\n                                    msg += '</c>';\n                                }\n                                msg += '</row>';\n                                return msg;\n                            }\n                        }\n                       \n                        //\$('.datepicker').datepicker({\n                            //format: 'yyyy-mm-dd',\n                            //autoclose:true,\n                        //});\n                        //\$(\".datepicker\").datepicker( \"setDate\", new Date() ).attr('readonly','readonly');\n    \n                        \$('.selectpicker').selectpicker();\n                        \n\n                        \n                        var defaultStart = moment().startOf('month');\n                        var end = moment();\n                        \n                        \$('.datepicker').daterangepicker({\n                            //dateLimit:{month:12},\n                            startDate: defaultStart,\n                            endDate: end,\n                            locale: {\n                                format: 'YYYY-MM-DD'\n                            },\n                            ranges: {\n                                'Today': [moment(), moment()],\n                                'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],\n                                'Last 7 Days': [moment().subtract(6, 'days'), moment()],\n                                'Last 30 Days': [moment().subtract(29, 'days'), moment()],\n                                'This Month': [moment().startOf('month'), moment().endOf('month')],\n                                'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]\n                             }\n                        });\n                        \n                        if(table.rows().count()==0)\n                            \$(\"#tab_toolbar button.blueB\").addClass(\"disabled\");\n                        \n                        updateWellInfo();\n                        \n                        \$( \"#salesDate\" ).change(function() {\n                            report_day_changed();\n                        });\n                    },\n                    fnDrawCallback: updateRows,\n                    fnRowCallback: function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {\n                        \$(nRow).addClass(aData[0]);\n                    },\n                });\n                \n                function updateRows(){\n                    var table = \$('#report__by_day').DataTable();\n                    var p = table.rows({ page: 'current' }).nodes();\n                    for (var k = 0; k < p.length; k++){\n                        var index = table.row(p[k]).index();\n                        \n                        if(parseFloat(table.cell(index, 10).data())!=0){\n                            \$(table.row(p[k]).node()).addClass('hilighted_row');\n                        }\n                   \n                    }\n                }\n                \n          \n                \$('#report__by_day').on( 'page.dt', function () {\n                    \$(\".selected\").removeClass(\"selected\");\n                    \$(\"#tab_toolbar button.blueB\").addClass(\"disabled\");\n                } );\n                \n                \$('#report__by_day').DataTable().columns().every( function () {\n                    var that = this;\n                    \$( 'input', this.footer() ).on( 'keyup change', function () {\n                        if ( that.search() !== this.value ) {\n                            that.search( this.value ).draw();\n                        }\n                    } );\n                } );\n                \n                \$('#report__by_day').DataTable().on( 'select', function ( e, dt, type, indexes ) {\n                    if (type === 'row') {\n \n                       \$(\"#tab_toolbar button.blueB\").removeClass(\"disabled\");\n                    }\n                } );\n                \n                \$('#report__by_day').DataTable().on( 'deselect', function ( e, dt, type, indexes ) {\n                    if (type === 'row') {\n                        \$(\"#tab_toolbar button.blueB\").addClass(\"disabled\");\n                    }\n                });\n  \n                \$('#report__by_day').DataTable().search( '' ).columns().search( '' ).draw();\n            }\n            \n            function update_data(){\n                \$(\".sk-circle-layer\").show();\n                var table = \$('#report__by_day').DataTable();\n                table.ajax.url(\"?r=reports&f=getReportByDay&p0=\"+current_store_id+\"&p1=\"+\$(\"#salesDate\").val()+\"&p2=\"+current_category_item+\"&p3=\"+\$(\"#sales_type\").val()+\"&p4=\"+\$(\"#parent_categories_id\").val()+\"&p5=\"+\$(\"#suppliers_list\").val()).load(function () {\n                    updateWellInfo();\n                }, false);\n            }\n            \n            function categories_changed(){\n                \$(\".sk-circle-layer\").show();\n                current_category_item = \$(\"#categories_list\").val();\n                var table = \$('#report__by_day').DataTable();\n                \n                table.ajax.url(\"?r=reports&f=getReportByDay&p0=\"+current_store_id+\"&p1=\"+\$(\"#salesDate\").val()+\"&p2=\"+current_category_item+\"&p3=\"+\$(\"#sales_type\").val()+\"&p4=\"+\$(\"#parent_categories_id\").val()+\"&p5=\"+\$(\"#suppliers_list\").val()).load(function () {\n                    updateWellInfo();\n                }, false);\n            }\n            \n            function report_day_changed(){\n                current_date = \$(\"#salesDate\").val();\n                \$(\".sk-circle-layer\").show();\n                var table = \$('#report__by_day').DataTable();\n                table.ajax.url(\"?r=reports&f=getReportByDay&p0=\"+current_store_id+\"&p1=\"+current_date+\"&p2=\"+current_category_item+\"&p3=\"+\$(\"#sales_type\").val()+\"&p4=\"+\$(\"#parent_categories_id\").val()+\"&p5=\"+\$(\"#suppliers_list\").val()).load(function () {\n                    updateWellInfo();\n                }, false);\n            }\n            \n            \n            function updateWellInfo(){\n                var profit = 0;\n                var total_sales = 0;\n                var manual_discount = 0;\n                var tm_discount_pl=0;\n                var total_profit = 0;\n                var total_expenses = 0;\n                var total_sales_debts = 0;\n                var total_sales_creditcards = 0;\n                var total_sales_cheques = 0;\n                var total_sales_total = 0;\n                var total_credit_notes = 0;\n                var total_net_profit=0;\n                var total_wasting = 0;\n                \n                if(current_category_item==0){\n                    \$(\".cat0hide\").show();\n                }else{\n                    \$(\".cat0hide\").hide();\n                }\n                \n                //alert(\"das\");\n                \n                \$.getJSON(\"?r=reports&f=getInfo&p0=\"+\$(\"#suppliers_list\").val()+\"&p1=\"+current_date+\"&p2=\"+current_category_item+\"&p3=\"+\$(\"#sales_type\").val()+\"&p4=\"+\$(\"#parent_categories_id\").val(), function (data) {\n                    profit = data.profit;\n                    total_sales = data.total_sales;\n                    manual_discount = data.manual_discount;\n                    tm_discount_pl=data.tm_discount_pl;\n                    total_profit = data.total_profit;\n                    total_expenses = data.total_expenses;\n                    total_sales_debts = data.total_sales_debts;\n                    total_sales_creditcards = data.total_sales_creditcards;\n                    total_sales_cheques = data.total_sales_cheques;\n                    total_sales_total = data.total_sales_total;\n                    total_credit_notes = data.total_credit_notes;\n                    total_net_profit=data.total_net_profit;\n                    total_wasting = data.total_wasting;\n                    \n                }).done(function () {\n                    //\$(\"#t_profit\").html(profit);\n                    \$(\"#total_sales\").html(total_sales+\" <small class='currency'>\"+currency+\"</small>\");\n                    \$(\"#total_sales_creditcard\").html(total_sales_creditcards+\" <small>\"+currency+\"</small>\");\n                    \n                        \$(\"#tm_discount\").html(manual_discount+\" <small class='currency'>\"+currency+\"</small>\");\n                        \n                        \$(\"#tm_discount_pl\").html(tm_discount_pl+\" <small class='currency'>\"+currency+\"</small>\");\n                        \n                        \n                        \$(\"#total_wasting\").html(total_wasting+\" <small class='currency'>\"+currency+\"</small>\");\n                        \n                    \n                    \$(\"#total_profit\").html(total_profit+\" <small class='currency'>\"+currency+\"</small>\");\n                   \n                    \$(\"#total_expenses\").html(total_expenses+\" <small class='currency'>\"+currency+\"</small>\");\n                    \$(\"#total_sales_debts\").html(total_sales_debts+\" <small class='currency'>\"+currency+\"</small>\");\n                    \$(\"#total_sales_cheques\").html(total_sales_cheques+\" <small class='currency'>\"+currency+\"</small>\");\n                    \$(\"#total_sales_total\").html(total_sales_total+\" <small class='currency'>\"+currency+\"</small>\");\n                    \$(\"#total_credit_notes\").html(total_credit_notes+\" <small class='currency'>\"+currency+\"</small>\");\n                    \$(\"#total_net_profit\").html(total_net_profit+\" <small class='currency'>\"+currency+\"</small>\");\n                    \n                    \n                    \n                    \n                    \$(\".sk-circle-layer\").hide();\n                });\n            }\n   \n            \n        </script>\n    </head>\n    <body>\n        \n        <!-- Navbar fixed top -->\n        ";
include "application/mvc/views/topMenu.php";
echo "        <div class=\"container\" >\n            <div class=\"panel panel-default\">\n                <div class=\"panel-body\" style=\"margin-top: 50px;\">\n                    \n                    <div class=\"row\"  >\n                        <div class=\"col-lg-12 col-md-12 col-sm-12\" >           \n                            <table style=\"width:100%;\" id=\"report__by_day\" class=\"table table-striped table-bordered \" cellspacing=\"0\">\n                                <thead>\n                                    <tr>\n                                        <th style=\"width: 45px;\">Inv.</th>\n                                        <th style=\"width: 30px;\">Item</th>\n                                        <th style=\"width: 60px;\">Barcode</th>\n                                        <th style=\"width: 60px;\">Reference</th>\n                                        <th>Description</th>\n                                        <th style=\"width: 100px;\">Date-time</th>\n                                        <th style=\"width: 20px;\">QTY</th>\n                                        <th style=\"width: 35px;\">Stock</th>\n                                        <th style=\"width: 35px;\">cost/u</th>\n                                        <th style=\"width: 60px;\">price/u</th>\n                                        <th style=\"width: 20px;  background-color: ";
echo $data["row_discounted_color_in_report"];
echo " !important;\">Dis.</th>\n                                        <th style=\"width: 20px;\">Vat</th>\n                                        <th style=\"width: 60px;\">Tot. Price</th>\n                                        <th style=\"width: 30px;\">Profit</th>\n                                        <th style=\"width: 55px;\">P. Margin</th>\n                                        <th style=\"width: 55px;\">Category</th>\n                                        <th style=\"width: 55px;\">Subcategory</th>\n                                    </tr>\n                                </thead>\n                                <tfoot>\n                                    <tr>\n                                        <th>Inv.</th>\n                                        <th>Item</th>\n                                        <th>Barcode</th>\n                                        <th>Reference</th>\n                                        <th>Description</th>\n                                        <th>Date-time</th>\n                                        <th>QTY</th>\n                                        <th>In Stock</th>\n                                        <th>cost/u</th>\n                                        <th>price/u</th>\n                                        <th>Discount</th>\n                                        <th>Vat</th>\n                                        <th>Total Price</th>\n                                        <th>Profit</th>\n                                        <th>Profit Margin</th>\n                                        <th>Category</th>\n                                        <th>Subcategory</th>\n                                    </tr>\n                                </tfoot>\n                                <tbody></tbody>\n                            </table>\n                        </div>\n                    </div>\n                    \n                    \n                </div>\n            </div>\n        </div>\n        \n        <div class=\"sk-circle-layer\">\n            <div class=\"sk-circle\">\n                <div class=\"sk-circle1 sk-child\"></div>\n                <div class=\"sk-circle2 sk-child\"></div>\n                <div class=\"sk-circle3 sk-child\"></div>\n                <div class=\"sk-circle4 sk-child\"></div>\n                <div class=\"sk-circle5 sk-child\"></div>\n                <div class=\"sk-circle6 sk-child\"></div>\n                <div class=\"sk-circle7 sk-child\"></div>\n                <div class=\"sk-circle8 sk-child\"></div>\n                <div class=\"sk-circle9 sk-child\"></div>\n                <div class=\"sk-circle10 sk-child\"></div>\n                <div class=\"sk-circle11 sk-child\"></div>\n                <div class=\"sk-circle12 sk-child\"></div>\n            </div>\n        </div>\n    </body>\n</html>\n\n";

?>